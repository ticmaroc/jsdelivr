(function(){window.up={}}).call(this),function(){var e=[].slice;up.util=function(t){var n,r,o,u,i,a,s,l,c,p,f,d,m,h,v,g,y,b,w,k,S,x,D,P,$,A,E,T,C,F,O,U,R,M,j,K,I,L,N,z,W,q,H,Q,_,V,J,B,X,G,Y,Z,et,tt,nt,rt,ot,ut,it,at,st,lt,ct,pt,ft,dt,mt,ht,vt,gt,yt,bt,wt,kt,St,xt,Dt,Pt,$t,At,Et,Tt,Ct,Ft,Ot,Ut,Rt,Mt,jt,Kt,It,Lt,Nt,zt,Wt,qt,Ht,Qt,_t,Vt,Jt;return pt=t.noop,ut=function(t){var n,r;return n=void 0,r=!1,function(){var o;return o=1<=arguments.length?e.call(arguments,0):[],r?n:(r=!0,n=t.apply(null,o))}},X=function(e,t){return t=t.toString(),(""===t||"80"===t)&&"http:"===e||"443"===t&&"https:"===e},dt=function(e,t){var n,r,o;return n=kt(e),r=n.protocol+"//"+n.hostname,X(n.protocol,n.port)||(r+=":"+n.port),o=n.pathname,"/"!==o[0]&&(o="/"+o),(null!=t?t.stripTrailingSlash:void 0)===!0&&(o=o.replace(/\/$/,"")),r+=o,(null!=t?t.hash:void 0)===!0&&(r+=n.hash),(null!=t?t.search:void 0)!==!1&&(r+=n.search),r},kt=function(e){var n;return n=null,G(e)?(n=t("<a>").attr({href:e}).get(0),R(n.hostname)&&(n.href=n.href)):n=Ht(e),n},ft=function(e){return e?e.toUpperCase():"GET"},n=function(e){var n,r,o,u,i,a,s,l,c,p,f,d,m,h,v,g;for(v=e.split(/[ >]/),o=null,f=c=0,m=v.length;m>c;f=++c){for(a=v[f],i=a.match(/(^|\.|\#)[A-Za-z0-9\-_]+/g),g="div",u=[],p=null,d=0,h=i.length;h>d;d++)switch(s=i[d],s[0]){case".":u.push(s.substr(1));break;case"#":p=s.substr(1);break;default:g=s}l="<"+g,u.length&&(l+=' class="'+u.join(" ")+'"'),p&&(l+=' id="'+p+'"'),l+=">",n=t(l),r&&n.appendTo(r),0===f&&(o=n),r=n}return o},v=function(e,t){var n;return n=document.createElement(e),J(t)&&(n.innerHTML=t),n},r=function(e,t){var r;return null==t&&(t=document.body),r=n(e),r.addClass("up-placeholder"),r.appendTo(t),r},jt=function(e){var n,r,o,u,i,a,s,l,c;if(n=t(e),l=void 0,up.puts("Creating selector from element %o",n.get(0)),c=Dt(n.attr("up-id")))l="[up-id='"+c+"']";else if(u=Dt(n.attr("id")))l="#"+u;else if(s=Dt(n.attr("name")))l="[name='"+s+"']";else if(r=Dt(ct(n)))for(l="",o=0,a=r.length;a>o;o++)i=r[o],l+="."+i;else l=n.prop("tagName").toLowerCase();return l},ct=function(e){var t,n;return t=e.attr("class")||"",n=t.split(" "),Mt(n,function(e){return J(e)&&!e.match(/^up-/)})},g=function(e){var t,n,r,o,u,i,a,s,l,c,p,f;return l=function(e){return"<"+e+"(?: [^>]*)?>"},i=function(e){return"</"+e+">"},t="(?:.|\\n)*?",u=function(e){return"("+e+")"},f=new RegExp(l("head")+t+l("title")+u(t)+i("title")+t+i("body"),"i"),o=new RegExp(l("body")+u(t)+i("body"),"i"),(r=e.match(o))?(s=document.createElement("html"),n=v("body",r[1]),s.appendChild(n),(p=e.match(f))&&(a=v("head"),s.appendChild(a),c=v("title",p[1]),a.appendChild(c)),s):v("div",e)},P=t.extend,qt=t.trim,k=function(e,t){var n,r,o,u,i;for(i=[],r=n=0,u=e.length;u>n;r=++n)o=e[r],i.push(t(o,r));return i},rt=k,Nt=function(e,t){var n,r,o,u;for(u=[],r=n=0,o=e-1;o>=0?o>=n:n>=o;r=o>=0?++n:--n)u.push(t(r));return u},Q=function(e){return null===e},Y=function(e){return void 0===e},j=function(e){return!Y(e)},H=function(e){return Y(e)||Q(e)},z=function(e){return!H(e)},R=function(e){return H(e)||V(e)&&0===Object.keys(e).length||0===e.length},Dt=function(e,t){return null==t&&(t=J),t(e)?e:void 0},J=function(e){return!R(e)},N=function(e){return"function"==typeof e},G=function(e){return"string"==typeof e},_=function(e){return"number"==typeof e},W=function(e){return"object"==typeof e&&!!e},V=function(e){return W(e)||"function"==typeof e},I=function(e){return!(!e||1!==e.nodeType)},q=function(e){return e instanceof jQuery},B=function(e){return V(e)&&N(e.then)},M=function(e){return B(e)&&N(e.resolve)},U=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},L=function(e){return up.browser.canFormData()&&e instanceof FormData},Wt=function(e){return Array.prototype.slice.call(e)},m=function(e){return U(e)?e.slice():P({},e)},Ht=function(e){return q(e)?e.get(0):e},it=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],P.apply(null,[{}].concat(e.call(t)))},wt=function(e,t){var n,r,o,u;if(o=e?m(e):{},t)for(r in t)n=t[r],u=o[r],z(u)?V(n)&&V(u)&&(o[r]=wt(u,n)):o[r]=n;return o},bt=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],b(t,z)},b=function(e,t){var n,r,o,u;for(u=void 0,r=0,o=e.length;o>r;r++)if(n=e[r],t(n)){u=n;break}return u},i=function(e,t){var n,r,o,u;for(u=!1,r=0,o=e.length;o>r;r++)if(n=e[r],t(n)){u=!0;break}return u},u=function(e,t){var n,r,o,u;for(u=!0,r=0,o=e.length;o>r;r++)if(n=e[r],!t(n)){u=!1;break}return u},p=function(e){return Mt(e,z)},Qt=function(e){var t;return t={},Mt(e,function(e){return t.hasOwnProperty(e)?!1:t[e]=!0})},Mt=function(e,t){var n;return n=[],k(e,function(e){return t(e)?n.push(e):void 0}),n},$t=function(e,t){return Mt(e,function(e){return!t(e)})},O=function(e,t){return Mt(e,function(e){return d(t,e)})},Pt=function(){var t,n,r,o;return t=arguments[0],r=2<=arguments.length?e.call(arguments,1):[],o=function(){var e,o,u;for(u=[],e=0,o=r.length;o>e;e++)n=r[e],u.push(t.attr(n));return u}(),b(o,J)},It=function(e,t){return e>0?setTimeout(t,e):t()},lt=function(e){return setTimeout(e,0)},tt=function(e){return e[e.length-1]},c=function(){var e;return e=document.documentElement,{width:e.clientWidth,height:e.clientHeight}},Rt=ut(function(){var e,n,r;return e=t("<div>").css({position:"absolute",top:"0",left:"0",width:"50px",height:"50px",overflowY:"scroll"}),e.appendTo(document.body),n=e.get(0),r=n.offsetWidth-n.clientWidth,e.remove(),r}),w=function(){var e,n,r,o,u,i;return n=document.body,e=t(n),i=document.documentElement,r=e.css("overflow-y"),u="scroll"===r,o="hidden"===r,u||!o&&i.scrollHeight>i.clientHeight},vt=function(t){var n;return n=void 0,function(){var r;return r=1<=arguments.length?e.call(arguments,0):[],null!=t&&(n=t.apply(null,r)),t=void 0,n}},Lt=function(e,t,n){var r,o;return o=e.css(Object.keys(t)),e.css(t),r=function(){return e.css(o)},n?(n(),r()):vt(r)},C=function(e){var t,n;return n=e.css(["transform","-webkit-transform"]),R(n)||"none"===n.transform?(t=function(){return e.css(n)},e.css({transform:"translateZ(0)","-webkit-transform":"translateZ(0)"})):t=function(){},t},F=function(e){return e=Ht(e),e.offsetHeight},y=function(e,n,r){var u,i,a,s,l,c,p,f;return u=t(e),r=wt(r,{duration:300,delay:0,easing:"ease"}),i=t.Deferred(),p=Object.keys(n),l={"transition-property":p.join(", "),"transition-duration":r.duration+"ms","transition-delay":r.delay+"ms","transition-timing-function":r.easing},a=u.css(Object.keys(l)),u.addClass("up-animating"),c=function(){return u.removeClass("up-animating"),u.off("transitionend",s)},s=function(e){var t;return t=e.originalEvent.propertyName,d(p,t)?(i.resolve(),c()):void 0},u.on("transitionend",s),i.then(c),f=C(u),u.css(l),u.css(n),u.data(o,i),i.then(function(){var e;return u.removeData(o),f(),u.css({transition:"none"}),e=!("none"===a["transition-property"]||"all"===a["transition-property"]&&"0"===a["transition-duration"][0]),e?(F(u),u.css(a)):void 0}),i},o="up-animation-deferred",E=function(e){return t(e).each(function(){var e;return(e=St(this,o))?e.resolve():void 0})},ot=function(e,n){var r,o,u,i,a,s;return n=wt(n,{relative:!1,inner:!1,full:!1}),n.relative?n.relative===!0?a=e.position():(r=t(n.relative),s=e.offset(),r.is(document)?a=s:(i=r.offset(),a={left:s.left-i.left,top:s.top-i.top})):a=e.offset(),u={left:a.left,top:a.top},n.inner?(u.width=e.width(),u.height=e.height()):(u.width=e.outerWidth(),u.height=e.outerHeight()),n.full&&(o=up.layout.viewportOf(e),u.right=o.width()-(u.left+u.width),u.bottom=o.height()-(u.top+u.height)),u},h=function(e,t){var n,r,o,u,i;for(u=e.get(0).attributes,i=[],r=0,o=u.length;o>r;r++)n=u[r],i.push(n.specified?t.attr(n.name,n.value):void 0);return i},A=function(e,t){return e.find(t).addBack(t)},x=function(e){return 27===e.keyCode},d=function(e,t){return e.indexOf(t)>=0},l=function(e,t){var n;switch(n=e.attr(t)){case"false":return!1;case"true":return!0;case"":return!0;default:return n}},nt=function(e){return e.getResponseHeader("X-Up-Location")},zt=function(e){return e.getResponseHeader("X-Up-Title")},at=function(e){return e.getResponseHeader("X-Up-Method")},gt=function(){var t,n,r,o,u,i;for(o=arguments[0],u=2<=arguments.length?e.call(arguments,1):[],t={},n=0,r=u.length;r>n;n++)i=u[n],o.hasOwnProperty(i)&&(t[i]=o[i]);return t},D=function(){var t,n,r,o,u,i;for(o=arguments[0],u=2<=arguments.length?e.call(arguments,1):[],t=m(o),n=0,r=u.length;r>n;n++)i=u[n],delete t[i];return t},Z=function(e){return!(e.metaKey||e.shiftKey||e.ctrlKey)},et=function(e){var t;return t=Y(e.button)||0===e.button,t&&Z(e)},Ot=function(){var e;return e=t.Deferred(),e.resolve(),e},Ut=function(){return Ot().promise()},_t=function(){return t.Deferred()},Vt=function(){return _t().promise()},mt=function(){return t()},Ft=function(){var n,r;return n=1<=arguments.length?e.call(arguments,0):[],r=t.when.apply(t,[Ot()].concat(e.call(n))),r.resolve=ut(function(){return k(n,function(e){return e.resolve()})}),r},Kt=function(e,t){var n,r,o;r=[];for(n in t)o=t[n],r.push(H(e.attr(n))?e.attr(n,o):void 0);return r},At=function(e,t){var n;return n=e.indexOf(t),n>=0?(e.splice(n,1),t):void 0},st=function(e){var n,r,o,u,a,s,l;for(a={},l=[],r=[],o=0,u=e.length;u>o;o++)s=e[o],G(s)?l.push(s):r.push(s);return a.parsed=r,l.length&&(n=l.join(", "),a.parsed.push(n)),a.select=function(){return a.find(void 0)},a.find=function(e){var n,r,o,u,i,s;for(r=mt(),i=a.parsed,o=0,u=i.length;u>o;o++)s=i[o],n=e?e.find(s):t(s),r=r.add(n);return r},a.findWithSelf=function(e){var t;return t=a.find(e),a.doesMatch(e)&&(t=t.add(e)),t},a.doesMatch=function(e){var n;return n=t(e),i(a.parsed,function(e){return n.is(e)})},a.seekUp=function(e){var n,r,o;for(o=t(e),n=o,r=void 0;n.length;){if(a.doesMatch(n)){r=n;break}n=n.parent()}return r||mt()},a},s=function(t){var n,r,o,u,i,a,s,l,c,p,f,d,h,v,g;return null==t&&(t={}),v=void 0,d=function(e){return function(){var n;return n=t[e],_(n)?n:N(n)?n():void 0}},p=d("size"),o=d("expiry"),f=function(e){return t.key?t.key(e):e.toString()},i=function(){return 0!==p()&&0!==o()},r=function(){return v={}},r(),l=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],t.logPrefix?(n[0]="["+t.logPrefix+"] "+n[0],up.puts.apply(up,n)):void 0},s=function(){return Object.keys(v)},c=function(){var e,t,n,r;return r=m(s()),e=p(),e&&r.length>=e&&(t=null,n=null,k(r,function(e){var r,o;return r=v[e],o=r.timestamp,!n||n>o?(t=e,n=o):void 0}),t)?delete v[t]:void 0},n=function(e,t){var n;return n=u(e,{silent:!0}),j(n)?h(t,n):void 0},g=function(){return(new Date).valueOf()},h=function(e,t){var n;return i()?(c(),n=f(e),v[n]={timestamp:g(),value:t}):void 0},At=function(e){var t;return t=f(e),delete v[t]},a=function(e){var t,n;return t=o(),t?(n=g()-e.timestamp,t>n):!0},u=function(e,t){var n,r;return null==t&&(t={}),r=f(e),(n=v[r])?a(n)?(t.silent||l("Cache hit for '%s'",e),n.value):(t.silent||l("Discarding stale cache entry for '%s'",e),void At(e)):void(t.silent||l("Cache miss for '%s'",e))},{alias:n,get:u,set:h,remove:At,clear:r,keys:s}},f=function(e){var t;return null==e&&(e={}),t={},t.reset=function(){return P(t,e)},t.reset(),Object.preventExtensions(t),t},Jt=function(e){var t,n;return e=Ht(e),t=e.parentNode,n=Wt(e.childNodes),k(n,function(n){return t.insertBefore(n,e)}),t.removeChild(e)},ht=function(e){var t,n;for(t=void 0;(e=e.parent())&&e.length;)if(n=e.css("position"),"absolute"===n||"relative"===n||e.is("body")){t=e;break}return t},T=function(e,n){var r,o,u,i;return r=t(e),o=ht(r),u=r.position(),i=o.offset(),r.css({position:"absolute",left:u.left-i.left,top:u.top-i.top+n.scrollTop(),right:"",bottom:""})},Et=function(e){var t,n,r,o,u,i,a;if(L(e))return up.error("Cannot convert FormData into an array");for(i=Tt(e),t=[],a=i.split("&"),n=0,r=a.length;r>n;n++)u=a[n],J(u)&&(o=u.split("="),t.push({name:decodeURIComponent(o[0]),value:decodeURIComponent(o[1])}));return t},Tt=function(e){var n;return L(e)?up.error("Cannot convert FormData into a query string"):J(e)?(n=t.param(e),n=n.replace(/\+/g,"%20")):""},Ct=function(e){var n,r;return n=t(e),r=n.find("input[type=file]").length,r&&up.browser.canFormData()?new FormData(n.get(0)):n.serializeArray()},a=function(e,t,n){var r;return L(e)?e.append(t,n):U(e)?e.push({name:t,value:n}):V(e)?e[t]=n:(G(e)||H(e))&&(r=Tt([{name:t,value:n}]),e=J(e)?[e,r].join("&"):r),e},S=function(){var n,r,o,u,i;throw r=1<=arguments.length?e.call(arguments,0):[],(u=up.log).error.apply(u,r),o=(i=up.browser).sprintf.apply(i,r),n=Dt(t(".up-error"))||t('<div class="up-error"></div>').prependTo("body"),n.addClass("up-error"),n.text(o),new Error(o)},xt=function(e,t){var n;return n=e[t],delete e[t],n},St=function(e,n){var r,o;return r=t(e),o=r.data(n),r.removeData(n),o},$=function(e){var t;return t=tt(e),W(t)&&!q(t)?e.pop():{}},yt=function(e){var n;return n=t(e).css("opacity"),z(n)?parseFloat(n):void 0},K=function(e){return e=Ht(e),!jQuery.contains(document.documentElement,e)},{isDetached:K,requestDataAsArray:Et,requestDataAsQuery:Tt,appendRequestData:a,requestDataFromForm:Ct,offsetParent:ht,fixedToAbsolute:T,presentAttr:Pt,createElement:v,parseUrl:kt,normalizeUrl:dt,normalizeMethod:ft,createElementFromHtml:g,$createElementFromSelector:n,$createPlaceholder:r,selectorForElement:jt,extend:P,copy:m,merge:it,options:wt,option:bt,error:S,each:k,map:rt,times:Nt,any:i,all:u,detect:b,select:Mt,reject:$t,intersect:O,compact:p,uniq:Qt,last:tt,isNull:Q,isDefined:j,isUndefined:Y,isGiven:z,isMissing:H,isPresent:J,isBlank:R,presence:Dt,isObject:V,isFunction:N,isString:G,isElement:I,isJQuery:q,isPromise:B,isDeferred:M,isHash:W,isArray:U,isFormData:L,isUnmodifiedKeyEvent:Z,isUnmodifiedMouseEvent:et,nullJQuery:mt,unJQuery:Ht,setTimer:It,nextFrame:lt,measure:ot,temporaryCss:Lt,cssAnimate:y,finishCssAnimate:E,forceCompositing:C,forceRepaint:F,escapePressed:x,copyAttributes:h,findWithSelf:A,contains:d,toArray:Wt,castedAttr:l,locationFromXhr:nt,titleFromXhr:zt,methodFromXhr:at,clientSize:c,only:gt,except:D,trim:qt,unresolvableDeferred:_t,unresolvablePromise:Vt,resolvedPromise:Ut,resolvedDeferred:Ot,resolvableWhen:Ft,setMissingAttrs:Kt,remove:At,memoize:ut,scrollbarWidth:Rt,documentHasVerticalScrollbar:w,config:f,cache:s,unwrapElement:Jt,multiSelector:st,error:S,pluckData:St,pluckKey:xt,extractOptions:$,isDetached:K,noop:pt,opacity:yt}}($),up.error=up.util.error}.call(this),function(){var e=[].slice;up.log=function(){var t,n,r,o,u,i;return o=function(e){return"\u1d1c\u1d18 "+e},t=function(){var t,n,r;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],n?(r=up.browser).puts.apply(r,["debug",o(n)].concat(e.call(t))):void 0},u=function(){var t,n,r;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],n?(r=up.browser).puts.apply(r,["log",o(n)].concat(e.call(t))):void 0},i=function(){var t,n,r;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],n?(r=up.browser).puts.apply(r,["warn",o(n)].concat(e.call(t))):void 0},r=function(){var t,n,r,u;if(r=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],n=t.pop(),!r)return n();(u=up.browser).puts.apply(u,["group",o(r)].concat(e.call(t)));try{return n()}finally{r&&console.groupEnd()}},n=function(){var t,n,r;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],n?(r=up.browser).puts.apply(r,["error",o(n)].concat(e.call(t))):void 0},{puts:u,debug:t,error:n,warn:i,group:r}}(jQuery),up.puts=up.log.puts}.call(this),function(){var e=[].slice;up.browser=function(t){var n,r,o,u,i,a,s,l,c,p,f,d,m,h,v,g,y,b,w;return b=up.util,h=function(e,n){var r,o,u,i,a;return null==n&&(n={}),i=b.option(n.method,"get").toLowerCase(),"get"===i?(a=b.requestDataAsQuery(n.data),a&&(e=e+"?"+a),location.href=e):(r=t("<form method='post' action='"+e+"'></form>"),o=function(e){var n;return n=t('<input type="hidden">'),n.attr(e.name,e.value),n.appendTo(r)},o({name:up.proxy.config.wrapMethodParam,value:i}),(u=up.rails.csrfField())&&o(u),b.each(b.requestDataAsArray(n.data),o),r.hide().appendTo("body"),r.submit())},g=function(){var t,n,r;return r=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],b.isDefined(console[r])||(r="log"),i()?console[r].apply(console,t):(n=y.apply(null,t),console[r](n))},n=/\%[odisf]/g,y=function(){var t,r,o,u;return u=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],r=0,o=80,u.replace(n,function(){var e,n;return e=t[r],n=typeof e,"string"===n?(e=e.replace(/\s+/g," "),e.length>o&&(e=e.substr(0,o)+"\u2026"),e='"'+e+'"'):e="undefined"===n?"undefined":"number"===n||"function"===n?e.toString():JSON.stringify(e),e.length>o&&(e=e.substr(0,o)+" \u2026",("object"===n||"function"===n)&&(e+=" }")),r+=1,e})},w=function(){return location.href},p=b.memoize(function(){return b.isUndefined(document.addEventListener)}),f=b.memoize(function(){return p()||-1!==navigator.appVersion.indexOf("MSIE 9.")}),a=b.memoize(function(){return b.isDefined(history.pushState)&&"get"===l()}),r=b.memoize(function(){return"transition"in document.documentElement.style}),u=b.memoize(function(){return"oninput"in document.createElement("input")}),o=b.memoize(function(){return!!window.FormData}),i=b.memoize(function(){return!f()}),d=b.memoize(function(){var e,n,r,o;return o=t.fn.jquery,r=o.split("."),e=parseInt(r[0]),n=parseInt(r[1]),e>=2||1===e&&n>=9}),v=function(e){var t,n;return n=null!=(t=document.cookie.match(new RegExp(e+"=(\\w+)")))?t[1]:void 0,b.isPresent(n)&&(document.cookie=e+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/"),n},s=function(e){return e.preload||b.isBlank(e.confirm)||window.confirm(e.confirm)?b.resolvedPromise():b.unresolvablePromise()},l=b.memoize(function(){return(v("_up_request_method")||"get").toLowerCase()}),m=function(){return!p()&&d()},c=function(){return console.group||(console.group=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],g.apply(null,["group"].concat(e.call(t)))}),console.groupCollapsed||(console.groupCollapsed=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],g.apply(null,["groupCollapsed"].concat(e.call(t)))}),console.groupEnd||(console.groupEnd=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],g.apply(null,["groupEnd"].concat(e.call(t)))})},{url:w,loadPage:h,confirm:s,canPushState:a,canCssTransition:r,canInputEvent:u,canFormData:o,canLogSubstitution:i,isSupported:m,installPolyfills:c,puts:g,sprintf:y}}(jQuery)}.call(this),function(){var slice=[].slice;up.bus=function($){var boot,emit,emitReset,forgetUpDescription,live,liveUpDescriptions,logEmission,nextUpDescriptionNumber,nobodyPrevents,onEscape,rememberUpDescription,restoreSnapshot,snapshot,u,unbind,upDescriptionNumber,upDescriptionToJqueryDescription,upListenerToJqueryListener;return u=up.util,liveUpDescriptions={},nextUpDescriptionNumber=0,upListenerToJqueryListener=function(e){return function(t){var n;return n=t.$element||$(this),e.apply(n.get(0),[t,n,up.syntax.data(n)])}},upDescriptionToJqueryDescription=function(e,t){var n,r,o;return n=u.copy(e),o=n.pop(),r=void 0,t?(r=upListenerToJqueryListener(o),o._asJqueryListener=r,o._descriptionNumber=++nextUpDescriptionNumber):(r=o._asJqueryListener,r||u.error("up.off: The event listener %o was never registered through up.on")),n.push(r),n},live=function(){var e,t,n;return n=1<=arguments.length?slice.call(arguments,0):[],up.browser.isSupported()?(e=upDescriptionToJqueryDescription(n,!0),rememberUpDescription(n),(t=$(document)).on.apply(t,e),function(){return unbind.apply(null,n)}):function(){}},unbind=function(){var e,t,n;return n=1<=arguments.length?slice.call(arguments,0):[],e=upDescriptionToJqueryDescription(n,!1),forgetUpDescription(n),(t=$(document)).off.apply(t,e)},rememberUpDescription=function(e){var t;return t=upDescriptionNumber(e),liveUpDescriptions[t]=e},forgetUpDescription=function(e){var t;return t=upDescriptionNumber(e),delete liveUpDescriptions[t]},upDescriptionNumber=function(e){return u.last(e)._descriptionNumber},emit=function(e,t){var n,r;return null==t&&(t={}),r=$.Event(e,t),(n=t.$element)?delete t.$element:n=$(document),logEmission(e,t),n.trigger(r),r},logEmission=function(e,t){var n,r,o;return t.hasOwnProperty("message")?(n=t.message,delete t.message,u.isArray(n)?(o=n,n=o[0],r=2<=o.length?slice.call(o,1):[]):r=[],n?u.isPresent(t)?up.puts.apply(up,[n+" (%s (%o))"].concat(slice.call(r),[e],[t])):up.puts.apply(up,[n+" (%s)"].concat(slice.call(r),[e])):void 0):u.isPresent(t)?up.puts("Emitted event %s (%o)",e,t):up.puts("Emitted event %s",e)},nobodyPrevents=function(){var e,t;return e=1<=arguments.length?slice.call(arguments,0):[],t=emit.apply(null,e),t.isDefaultPrevented()?(up.puts("An observer prevented the event %s",e[0]),!1):!0},onEscape=function(e){return live("keydown","body",function(t){return u.escapePressed(t)?e(t):void 0})},snapshot=function(){var e,t,n,r;for(r=[],t=0,n=liveUpDescriptions.length;n>t;t++)e=liveUpDescriptions[t],r.push(e.isDefault=!0);return r},restoreSnapshot=function(){var e,t,n,r,o;for(t=u.reject(liveUpDescriptions,function(e){return e.isDefault}),o=[],n=0,r=t.length;r>n;n++)e=t[n],o.push(unbind.apply(null,e));return o},emitReset=function(){return up.emit("up:framework:reset",{message:"Resetting framework"})},boot=function(){return up.browser.isSupported()?(up.browser.installPolyfills(),up.emit("up:framework:boot",{message:"Booting framework"})):void 0},live("up:framework:boot",snapshot),live("up:framework:reset",restoreSnapshot),{knife:eval("undefined"!=typeof Knife&&null!==Knife?Knife.point:void 0),on:live,off:unbind,emit:emit,nobodyPrevents:nobodyPrevents,onEscape:onEscape,emitReset:emitReset,boot:boot}}(jQuery),up.on=up.bus.on,up.off=up.bus.off,up.emit=up.bus.emit,up.reset=up.bus.emitReset,up.boot=up.bus.boot}.call(this),function(){var e=[].slice;up.syntax=function(t){var n,r,o,u,i,a,s,l,c,p,f,d,m,h,v;return v=up.util,n="up-destroyable",r="up-destroyer",l=[],d=[],s=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],p.apply(null,[l].concat(e.call(t)))},f=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],p.apply(null,[d].concat(e.call(t)))},u=function(){var t,n,r,o;return o=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],n=t.pop(),r=v.options(t[0],{priority:0}),"first"===r.priority?r.priority=Number.POSITIVE_INFINITY:"last"===r.priority&&(r.priority=Number.NEGATIVE_INFINITY),{selector:o,callback:n,priority:r.priority,batch:r.batch,keep:r.keep}},p=function(){var t,n,r,o,i;if(i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],up.browser.isSupported()){for(r=u.apply(null,t),n=0;(o=i[n])&&o.priority>=r.priority;)n+=1;return i.splice(n,0,r)}},o=function(e,t,o){var u,i;return up.puts(e.isDefault?void 0:"Compiling '%s' on %o",e.selector,o),e.keep&&(i=v.isString(e.keep)?e.keep:"",t.attr("up-keep",i)),u=e.callback.apply(o,[t,c(t)]),v.isFunction(u)?(t.addClass(n),t.data(r,u)):void 0},a=function(e,n){var r;return n=v.options(n),r=t(n.skip),up.log.group("Compiling fragment %o",e.get(0),function(){var n,u,i,a,c,p;for(c=[d,l],p=[],u=0,i=c.length;i>u;u++)a=c[u],p.push(function(){var u,i,l;for(l=[],u=0,i=a.length;i>u;u++)s=a[u],n=v.findWithSelf(e,s.selector),n=n.filter(function(){var e;return e=t(this),v.all(r,function(t){return 0===e.closest(t).length})}),l.push(n.length?up.log.group(s.isDefault?void 0:"Compiling '%s' on %d element(s)",s.selector,n.length,function(){return s.batch?o(s,n,n.get()):n.each(function(){return o(s,t(this),this)})}):void 0);return l}());return p})},i=function(e){return v.findWithSelf(e,"."+n).each(function(){var e,o;return e=t(this),o=e.data(r),e.removeClass(n),o()})},c=function(e){var n,r;return n=t(e),r=n.attr("up-data"),v.isString(r)&&""!==v.trim(r)?JSON.parse(r):{}},h=function(){var e;return e=function(e){return e.isDefault=!0},v.each(l,e),v.each(d,e)},m=function(){var e;return e=function(e){return e.isDefault},l=v.select(l,e),d=v.select(d,e)},up.on("up:framework:boot",h),up.on("up:framework:reset",m),{compiler:s,macro:f,compile:a,clean:i,data:c}}(jQuery),up.compiler=up.syntax.compiler,up.macro=up.syntax.macro,up.ready=function(){return up.util.error("up.ready no longer exists. Please use up.hello instead.")},up.awaken=function(){return up.util.error("up.awaken no longer exists. Please use up.compiler instead.")}}.call(this),function(){up.history=function(e){var t,n,r,o,u,i,a,s,l,c,p,f,d,m,h,v;return v=up.util,n=v.config({popTargets:["body"],restoreScroll:!0}),c=void 0,i=void 0,m=function(){return n.reset(),c=void 0,i=void 0},a=function(e){return v.normalizeUrl(e,{hash:!0})},r=function(){return a(up.browser.url())},o=function(e){return a(e)===r()},s=function(e){return i&&(c=i,i=void 0),i=e},d=function(e,t){return u("replace",e,t)},p=function(e,t){return up.puts("Current location is now %s",e),u("push",e,t)},u=function(e,n,u){var i,a;return u=v.options(u,{force:!1}),u.force||!o(n)?up.browser.canPushState()?(i=e+"State",a=t(),window.history[i](a,"",n),s(r())):v.error("This browser doesn't support history.pushState"):void 0},t=function(){return{fromUp:!0}},h=function(e){var t;return(null!=e?e.fromUp:void 0)?(t=r(),up.log.group("Restoring URL %s",t,function(){var e;return e=n.popTargets.join(", "),up.replace(e,t,{history:!1,title:!0,reveal:!1,transition:"none",saveScroll:!1,restoreScroll:n.restoreScroll})})):up.puts("Ignoring a state not pushed by Unpoly (%o)",e)},l=function(e){return up.log.group("History state popped to URL %s",r(),function(){var t;return s(r()),up.layout.saveScroll({url:c}),t=e.originalEvent.state,h(t)})},up.browser.canPushState()&&(f=function(){return e(window).on("popstate",l),d(r(),{force:!0})},"undefined"!=typeof jasmine&&null!==jasmine?f():setTimeout(f,100)),up.compiler("[up-back]",function(e){return v.isPresent(c)?(v.setMissingAttrs(e,{"up-href":c,"up-restore-scroll":""}),e.removeAttr("up-back"),up.link.makeFollowable(e)):void 0}),up.on("up:framework:reset",m),{config:n,defaults:function(){return v.error("up.history.defaults(...) no longer exists. Set values on he up.history.config property instead.")},push:p,replace:d,url:r,previousUrl:function(){return c},normalizeUrl:a}}(jQuery)}.call(this),function(){var slice=[].slice;up.layout=function($){var SCROLL_PROMISE_KEY,anchoredRight,config,finishScrolling,fixedChildren,lastScrollTops,measureObstruction,reset,restoreScroll,reveal,revealOrRestoreScroll,saveScroll,scroll,scrollTops,u,viewportOf,viewportSelector,viewports,viewportsWithin;return u=up.util,config=u.config({duration:0,viewports:[document,".up-modal-viewport","[up-viewport]"],fixedTop:["[up-fixed~=top]"],fixedBottom:["[up-fixed~=bottom]"],anchoredRight:["[up-anchored~=right]","[up-fixed~=top]","[up-fixed~=bottom]","[up-fixed~=right]"],snap:50,substance:150,easing:"swing"}),lastScrollTops=u.cache({size:30,key:up.history.normalizeUrl}),reset=function(){return config.reset(),lastScrollTops.clear()},SCROLL_PROMISE_KEY="up-scroll-promise",scroll=function(e,t,n){var r,o,i,a,s;return r=$(e),n=u.options(n),i=u.option(n.duration,config.duration),a=u.option(n.easing,config.easing),finishScrolling(r),i>0?(o=$.Deferred(),r.data(SCROLL_PROMISE_KEY,o),o.then(function(){return r.removeData(SCROLL_PROMISE_KEY),r.finish()}),s={scrollTop:t},r.get(0)===document&&(r=$("html, body")),r.animate(s,{duration:i,easing:a,complete:function(){return o.resolve()}}),o):(r.scrollTop(t),u.resolvedDeferred())},finishScrolling=function(e){return $(e).each(function(){var e;return(e=$(this).data(SCROLL_PROMISE_KEY))?e.resolve():void 0})},anchoredRight=function(){return u.multiSelector(config.anchoredRight).select()},measureObstruction=function(){var e,t,n,r;return n=function(e,t){var n,r;return n=$(e),r=n.css(t),u.isPresent(r)||u.error("Fixed element %o must have a CSS attribute %s",n.get(0),t),parseInt(r)+n.height()},t=function(){var e,t,o,u;for(o=$(config.fixedTop.join(", ")),u=[],e=0,t=o.length;t>e;e++)r=o[e],u.push(n(r,"top"));return u}(),e=function(){var e,t,o,u;for(o=$(config.fixedBottom.join(", ")),u=[],e=0,t=o.length;t>e;e++)r=o[e],u.push(n(r,"bottom"));return u}(),{top:Math.max.apply(Math,[0].concat(slice.call(t))),bottom:Math.max.apply(Math,[0].concat(slice.call(e)))}},reveal=function(e,t){var n,r,o,i,a,s,l,c,p,f,d,m,h,v;return n=$(e),up.puts("Revealing fragment %o",e.get(0)),t=u.options(t),r=t.viewport?$(t.viewport):viewportOf(n),m=u.option(t.snap,config.snap),v=r.is(document),h=v?u.clientSize().height:r.height(),p=r.scrollTop(),s=p,c=void 0,l=void 0,v?(l=measureObstruction(),c=0):(l={top:0,bottom:0},c=p),f=function(){return s+l.top},d=function(){return s+h-l.bottom-1},o=u.measure(n,{relative:r}),i=o.top+c,a=i+Math.min(o.height,config.substance)-1,a>d()&&(s+=a-d()),(i<f()||t.top)&&(s=i-l.top),m>s&&(s=0),s!==p?scroll(r,s,t):u.resolvedDeferred()},viewportSelector=function(){return u.multiSelector(config.viewports)},viewportOf=function(e,t){var n,r;return null==t&&(t={}),n=$(e),r=viewportSelector().seekUp(n),0===r.length&&t.strict!==!1&&u.error("Could not find viewport for %o",n),r},viewportsWithin=function(e){var t;return t=$(e),viewportSelector().findWithSelf(t)},viewports=function(){return viewportSelector().select()},scrollTops=function(){var e,t,n,r,o,u,i;for(u={},o=config.viewports,t=0,r=o.length;r>t;t++)i=o[t],e=$(i),e.length&&(n=i,i===document&&(n="document"),u[n]=e.scrollTop());return u},fixedChildren=function(e){var t,n;return null==e&&(e=void 0),e||(e=document.body),n=$(e),t=n.find("[up-fixed]"),u.isPresent(config.fixedTop)&&(t=t.add(n.find(config.fixedTop.join(", ")))),u.isPresent(config.fixedBottom)&&(t=t.add(n.find(config.fixedBottom.join(", ")))),t},saveScroll=function(e){var t,n;return null==e&&(e={}),n=u.option(e.url,up.history.url()),t=u.option(e.tops,scrollTops()),up.puts("Saving scroll positions for URL %s (%o)",n,t),lastScrollTops.set(n,t)},restoreScroll=function(e){var t,n,r,o,i;return null==e&&(e={}),i=up.history.url(),r=void 0,e.around?(n=viewportsWithin(e.around),t=viewportOf(e.around),r=t.add(n)):r=viewports(),o=lastScrollTops.get(i),up.log.group("Restoring scroll positions for URL %s to %o",i,o,function(){var e,t,n,i;for(t in o)i=o[t],n="document"===t?document:t,e=r.filter(n),scroll(e,i,{duration:0});return u.resolvedDeferred()})},revealOrRestoreScroll=function(e,t){var n,r,o,i;return n=$(e),t.restoreScroll?restoreScroll({around:n}):t.reveal?(t.source&&(i=u.parseUrl(t.source),i.hash&&"#"!==i.hash&&(o=i.hash.substr(1),r=u.findWithSelf(n,"#"+o+", a[name='"+o+"']"),r.length&&(n=r))),reveal(n)):u.resolvedDeferred()},up.on("up:framework:reset",reset),{knife:eval("undefined"!=typeof Knife&&null!==Knife?Knife.point:void 0),reveal:reveal,scroll:scroll,finishScrolling:finishScrolling,config:config,defaults:function(){return u.error("up.layout.defaults(...) no longer exists. Set values on he up.layout.config property instead.")},viewportOf:viewportOf,viewportsWithin:viewportsWithin,viewports:viewports,scrollTops:scrollTops,saveScroll:saveScroll,restoreScroll:restoreScroll,revealOrRestoreScroll:revealOrRestoreScroll,anchoredRight:anchoredRight,fixedChildren:fixedChildren}}(jQuery),up.scroll=up.layout.scroll,up.reveal=up.layout.reveal}.call(this),function(){up.flow=function($){var autofocus,destroy,emitFragmentInserted,emitFragmentKept,extract,findKeepPlan,findOldFragment,first,hello,isRealElement,oldFragmentNotFound,parseImplantSteps,parseResponse,processResponse,reload,replace,resolveSelector,setSource,source,swapElements,transferKeepableElements,u,updateHistory;return u=up.util,setSource=function(e,t){var n;return n=$(e),u.isPresent(t)&&(t=u.normalizeUrl(t)),n.attr("up-source",t)},source=function(e){var t;return t=$(e).closest("[up-source]"),u.presence(t.attr("up-source"))||up.browser.url()},resolveSelector=function(e,t){var n,r;return u.isString(e)?(r=e,u.contains(r,"&")&&(t?(n=u.selectorForElement(t),r=r.replace(/\&/,n)):u.error("Found origin reference (%s) in selector %s, but options.origin is missing","&",r))):r=u.selectorForElement(e),r},replace=function(e,t,n){var r,o,i,a,s,l;return up.puts("Replacing %s from %s (%o)",e,t,n),n=u.options(n),l=resolveSelector(e,n.origin),r=u.option(n.failTarget,"body"),r=resolveSelector(r,n.origin),up.browser.canPushState()||n.history===!1?(s={url:t,method:n.method,data:n.data,target:l,failTarget:r,cache:n.cache,preload:n.preload,headers:n.headers},a=up.ajax(s),i=function(e,r,o){return processResponse(!0,l,t,s,o,n)},o=function(e){return processResponse(!1,r,t,s,e,n)},a=a.then(i,o)):(n.preload||up.browser.loadPage(t,u.only(n,"method","data")),u.unresolvablePromise())},processResponse=function(e,t,n,r,o,i){var a,s,l,c;return i.method=u.normalizeMethod(u.option(u.methodFromXhr(o),i.method)),i.title=u.option(u.titleFromXhr(o),i.title),i.title===!1||u.isString(i.title)||i.history===!1&&i.title!==!0||(i.title=u.titleFromXhr(o)),a="GET"===i.method,(c=u.locationFromXhr(o))?(n=c,e&&(s={url:n,method:u.methodFromXhr(o),target:t},up.proxy.alias(r,s))):a&&(l=u.requestDataAsQuery(i.data))&&(n=n+"?"+l),e?a?(i.history===!1||u.isString(i.history)||(i.history=n),i.source===!1||u.isString(i.source)||(i.source=n)):(u.isString(i.history)||(i.history=!1),u.isString(i.source)||(i.source="keep")):(i.transition=i.failTransition,i.failTransition=void 0,a?(i.history!==!1&&(i.history=n),i.source!==!1&&(i.source=n)):(i.source="keep",i.history=!1)),i.preload?u.resolvedPromise():extract(t,o.responseText,i)
},extract=function(e,t,n){return up.log.group("Extracting %s from %d bytes of HTML",e,null!=t?t.length:void 0,function(){var r,o,i;return n=u.options(n,{historyMethod:"push",requireMatch:!0,keep:!0}),i=resolveSelector(e,n.origin),o=parseResponse(t,n),n.title||(n.title=o.title()),n.saveScroll!==!1&&up.layout.saveScroll(),r=u.resolvedPromise(),n.beforeSwap&&(r=r.then(n.beforeSwap)),r=r.then(function(){return updateHistory(n)}),r=r.then(function(){var e,t,r,u,a;for(a=[],r=parseImplantSteps(i,n),e=0,t=r.length;t>e;e++)u=r[e],up.log.group("Updating %s",u.selector,function(){var e,t,r,i;return t=findOldFragment(u.selector,n),e=null!=(r=o.find(u.selector))?r.first():void 0,t&&e?(i=swapElements(t,e,u.pseudoClass,u.transition,n),a.push(i)):void 0});return $.when.apply($,a)}),n.afterSwap&&(r=r.then(n.afterSwap)),r})},findOldFragment=function(e,t){return first(".up-popup "+e)||first(".up-modal "+e)||first(e)||oldFragmentNotFound(e,t)},oldFragmentNotFound=function(e,t){var n;return t.requireMatch?(n="Could not find selector %s in current body HTML","#"===n[0]&&(n+=" (avoid using IDs)"),u.error(n,e)):void 0},parseResponse=function(e,t){var n;return n=u.createElementFromHtml(e),{title:function(){var e;return null!=(e=n.querySelector("title"))?e.textContent:void 0},find:function(r){var o;return(o=$.find(r,n)[0])?$(o):t.requireMatch?u.error("Could not find selector %s in response %o",r,e):void 0}}},updateHistory=function(e){return e.title&&(document.title=e.title),e.history?up.history[e.historyMethod](e.history):void 0},swapElements=function(e,t,n,r,o){var i,a,s,l;return r||(r="none"),"keep"===o.source&&(o=u.merge(o,{source:source(e)})),up.motion.finish(e),n?(i=t.contents().wrap('<span class="up-insertion"></span>').parent(),"before"===n?e.prepend(i):e.append(i),hello(i.children(),o),s=up.layout.revealOrRestoreScroll(i,o),s=s.then(function(){return up.animate(i,r,o)}),s=s.then(function(){return u.unwrapElement(i)})):(a=findKeepPlan(e,t,o))?(emitFragmentKept(a),s=u.resolvedPromise()):(l=function(){return o.keepPlans=transferKeepableElements(e,t,o),e.is("body")?(up.syntax.clean(e),e.replaceWith(t)):t.insertBefore(e),o.source!==!1&&setSource(t,o.source),autofocus(t),hello(t,o),up.morph(e,t,r,o)},s=destroy(e,{animation:l})),s},transferKeepableElements=function(e,t,n){var r,o,i,a,s,l,c,p;if(a=[],n.keep)for(p=e.find("[up-keep]"),i=0,l=p.length;l>i;i++)s=p[i],r=$(s),(c=findKeepPlan(r,t,u.merge(n,{descendantsOnly:!0})))&&(o=r.clone(),r.replaceWith(o),c.$newElement.replaceWith(r),a.push(c));return a},findKeepPlan=function(e,t,n){var r,o,i,a,s;return n.keep&&(r=e,(s=u.castedAttr(r,"up-keep"))&&(u.isString(s)||(s="&"),s=resolveSelector(s,r),o=n.descendantsOnly?t.find(s):u.findWithSelf(t,s),o=o.first(),o.length&&o.is("[up-keep]")&&(i={$element:r,$newElement:o,newData:up.syntax.data(o)},a=u.merge(i,{message:["Keeping element %o",r.get(0)]}),up.bus.nobodyPrevents("up:fragment:keep",a))))?i:void 0},parseImplantSteps=function(e,t){var n,r,o,i,a,s,l,c,p,f,d,m;for(d=t.transition||t.animation||"none",n=/\ *,\ */,r=e.split(n),m=u.isString(m)?d.split(n):[d],l=[],o=i=0,a=r.length;a>i;o=++i)c=r[o],p=c.match(/^(.+?)(?:\:(before|after))?$/),p||u.error('Could not parse selector atom "%s"',c),e=p[1],"html"===e&&(e="body"),s=p[2],f=m[o]||u.last(m),l.push({selector:e,pseudoClass:s,transition:f});return l},hello=function(e,t){var n,r,o,i,a,s;for(n=$(e),t=u.options(t,{keepPlans:[]}),o=[],s=t.keepPlans,r=0,i=s.length;i>r;r++)a=s[r],emitFragmentKept(a),o.push(a.$element);return up.syntax.compile(n,{skip:o}),emitFragmentInserted(n,t),n},emitFragmentInserted=function(e,t){var n;return n=$(e),up.emit("up:fragment:inserted",{$element:n,message:["Inserted fragment %o",n.get(0)],origin:t.origin})},emitFragmentKept=function(e){var t;return t=u.merge(e,{message:["Kept fragment %o",e.$element.get(0)]}),up.emit("up:fragment:kept",t)},autofocus=function(e){var t,n;return n="[autofocus]:last",t=u.findWithSelf(e,n),t.length&&t.get(0)!==document.activeElement?t.focus():void 0},isRealElement=function(e){var t;return t=".up-ghost, .up-destroying",0===e.closest(t).length},first=function(e){var t,n,r,o,i,a;for(o=void 0,o=u.isString(e)?$(e).get():e,n=void 0,i=0,a=o.length;a>i;i++)if(r=o[i],t=$(r),isRealElement(t)){n=t;break}return n},destroy=function(e,t){var n,r,o,i,a;return n=$(e),n.is(".up-placeholder, .up-tooltip, .up-modal, .up-popup")||(i=["Destroying fragment %o",n.get(0)],a=["Destroyed fragment %o",n.get(0)]),0===n.length?u.resolvedDeferred():up.bus.nobodyPrevents("up:fragment:destroy",{$element:n,message:i})?(t=u.options(t,{animation:!1}),r=up.motion.animateOptions(t),n.addClass("up-destroying"),u.isPresent(t.url)&&up.history.push(t.url),u.isPresent(t.title)&&(document.title=t.title),o=u.presence(t.animation,u.isDeferred)||up.motion.animate(n,t.animation,r),o.then(function(){return up.syntax.clean(n),up.emit("up:fragment:destroyed",{$element:n,message:a}),n.remove()}),o):$.Deferred()},reload=function(e,t){var n;return t=u.options(t,{cache:!1}),n=t.url||source(e),replace(e,n,t)},up.on("ready",function(){var e;return e=$(document.body),setSource(e,up.browser.url()),hello(e)}),{knife:eval("undefined"!=typeof Knife&&null!==Knife?Knife.point:void 0),replace:replace,reload:reload,destroy:destroy,extract:extract,first:first,source:source,resolveSelector:resolveSelector,hello:hello}}(jQuery),up.replace=up.flow.replace,up.extract=up.flow.extract,up.reload=up.flow.reload,up.destroy=up.flow.destroy,up.first=up.flow.first,up.hello=up.flow.hello}.call(this),function(){var e=[].slice;up.motion=function(t){var n,r,o,u,i,a,s,l,c,p,f,d,m,h,v,g,y,b,w,k,S,x,D,P,$,A,E,T;return E=up.util,a={},c={},$={},p={},l=E.config({duration:300,delay:0,easing:"ease",enabled:!0}),k=function(){return a=E.copy(c),$=E.copy(p),l.reset()},v=function(){return l.enabled&&up.browser.canCssTransition()},o=function(e,n,r){var i;return i=t(e),m(i),r=u(r),"none"===n||n===!1?b():E.isFunction(n)?s(n(i,r),n):E.isString(n)?o(i,d(n),r):E.isHash(n)?v()?E.cssAnimate(i,n,r):(i.css(n),E.resolvedDeferred()):E.error("Unknown animation type for %o",n)},u=function(){var t,n,r,o,u;return n=1<=arguments.length?e.call(arguments,0):[],u=n.shift()||{},t=E.isJQuery(n[0])?n.shift():E.nullJQuery(),o=E.isObject(n[0])?n.shift():{},r={},r.easing=E.option(u.easing,E.presentAttr(t,"up-easing"),o.easing,l.easing),r.duration=Number(E.option(u.duration,E.presentAttr(t,"up-duration"),o.duration,l.duration)),r.delay=Number(E.option(u.delay,E.presentAttr(t,"up-delay"),o.delay,l.delay)),r},d=function(e){return a[e]||E.error("Unknown animation %o",e)},r="up-ghosting-deferred",n="up-ghosting",T=function(e,t,o,u){var i,a,s,l,c,p,f,d;return o.copy===!1||e.is(".up-ghost")||t.is(".up-ghost")?u(e,t):(p=void 0,l=void 0,f=void 0,c=void 0,a=up.layout.viewportOf(e),i=e.add(t),E.temporaryCss(t,{display:"none"},function(){return p=w(e,a),f=a.scrollTop()}),E.temporaryCss(e,{display:"none"},function(){return up.layout.revealOrRestoreScroll(t,o),l=w(t,a),c=a.scrollTop()}),p.moveTop(c-f),e.hide(),d=E.temporaryCss(t,{opacity:"0"}),s=u(p.$ghost,l.$ghost),i.data(r,s),i.addClass(n),s.then(function(){return i.removeData(r),i.removeClass(n),d(),p.$bounds.remove(),l.$bounds.remove()}),s)},m=function(e){var r,o,u;return null==e&&(e=".up-animating"),o=t(e),r=E.findWithSelf(o,".up-animating"),E.finishCssAnimate(r),u=E.findWithSelf(o,"."+n),h(u)},h=function(e){return e.each(function(){var e,n;return e=t(this),(n=E.pluckData(e,r))?n.resolve():void 0})},s=function(e,t){return E.isDeferred(e)?e:E.error("Did not return a promise with .then and .resolve methods: %o",t)},y=function(e,n,r,i){var l,c;return"none"===r&&(r=!1),i=E.options(i),c=t(e),l=t(n),f(c,r),f(l,r),up.log.group(r?"Morphing %o to %o (using %s, %o)":void 0,c.get(0),l.get(0),r,i,function(){var e,t,n,p;return t=E.only(i,"reveal","restoreScroll","source"),t=E.extend(t,u(i)),v()?(m(c),m(l),r?(e=a[r])?(x(c,l,t),o(l,e,t)):(p=E.presence(r,E.isFunction)||$[r])?T(c,l,t,function(e,n){var o;return o=p(e,n,t),s(o,r)}):E.isString(r)&&r.indexOf("/")>=0?(n=r.split("/"),p=function(e,t,r){return S(o(e,n[0],r),o(t,n[1],r))},y(c,l,p,t)):E.error("Unknown transition %o",r):x(c,l,t)):x(c,l,t)})},f=function(e,t){var n;return t&&0===e.parents("body").length?(n=e.get(0),E.error("Can't morph a <%s> element (%o)",n.tagName,n)):void 0},x=function(e,t,n){return e.hide(),up.layout.revealOrRestoreScroll(t,n)},w=function(e,n){var r,o,u,i,a,s,l,c,p;for(i=E.measure(e,{relative:!0,inner:!0}),u=e.clone(),u.find("script").remove(),u.css({position:"static"===e.css("position")?"static":"relative",top:"",right:"",bottom:"",left:"",width:"100%",height:"100%"}),u.addClass("up-ghost"),r=t('<div class="up-bounds"></div>'),r.css({position:"absolute"}),r.css(i),p=i.top,c=function(e){return 0!==e?(p+=e,r.css({top:p})):void 0},u.appendTo(r),r.insertBefore(e),c(e.offset().top-u.offset().top),o=up.layout.fixedChildren(u),s=0,l=o.length;l>s;s++)a=o[s],E.fixedToAbsolute(a,n);return{$ghost:u,$bounds:r,moveTop:c}},P=function(e,t){return $[e]=t},i=function(e,t){return a[e]=t},D=function(){return c=E.copy(a),p=E.copy($)},S=E.resolvableWhen,b=E.resolvedDeferred,g=function(e){return e===!1||"none"===e||e===b},i("none",b),i("fade-in",function(e,t){return e.css({opacity:0}),o(e,{opacity:1},t)}),i("fade-out",function(e,t){return e.css({opacity:1}),o(e,{opacity:0},t)}),A=function(e,t){return{transform:"translate("+e+"px, "+t+"px)"}},i("move-to-top",function(e,t){var n,r;return n=E.measure(e),r=n.top+n.height,e.css(A(0,0)),o(e,A(0,-r),t)}),i("move-from-top",function(e,t){var n,r;return n=E.measure(e),r=n.top+n.height,e.css(A(0,-r)),o(e,A(0,0),t)}),i("move-to-bottom",function(e,t){var n,r;return n=E.measure(e),r=E.clientSize().height-n.top,e.css(A(0,0)),o(e,A(0,r),t)}),i("move-from-bottom",function(e,t){var n,r;return n=E.measure(e),r=E.clientSize().height-n.top,e.css(A(0,r)),o(e,A(0,0),t)}),i("move-to-left",function(e,t){var n,r;return n=E.measure(e),r=n.left+n.width,e.css(A(0,0)),o(e,A(-r,0),t)}),i("move-from-left",function(e,t){var n,r;return n=E.measure(e),r=n.left+n.width,e.css(A(-r,0)),o(e,A(0,0),t)}),i("move-to-right",function(e,t){var n,r;return n=E.measure(e),r=E.clientSize().width-n.left,e.css(A(0,0)),o(e,A(r,0),t)}),i("move-from-right",function(e,t){var n,r;return n=E.measure(e),r=E.clientSize().width-n.left,e.css(A(r,0)),o(e,A(0,0),t)}),i("roll-down",function(e,t){var n,r,u;return r=e.height(),u=E.temporaryCss(e,{height:"0px",overflow:"hidden"}),n=o(e,{height:r+"px"},t),n.then(u),n}),P("none",b),P("move-left",function(e,t,n){return S(o(e,"move-to-left",n),o(t,"move-from-right",n))}),P("move-right",function(e,t,n){return S(o(e,"move-to-right",n),o(t,"move-from-left",n))}),P("move-up",function(e,t,n){return S(o(e,"move-to-top",n),o(t,"move-from-bottom",n))}),P("move-down",function(e,t,n){return S(o(e,"move-to-bottom",n),o(t,"move-from-top",n))}),P("cross-fade",function(e,t,n){return S(o(e,"fade-out",n),o(t,"fade-in",n))}),up.on("up:framework:boot",D),up.on("up:framework:reset",k),{morph:y,animate:o,animateOptions:u,finish:m,transition:P,animation:i,config:l,isEnabled:v,defaults:function(){return E.error("up.motion.defaults(...) no longer exists. Set values on he up.motion.config property instead.")},none:b,when:S,prependCopy:w,isNone:g}}(jQuery),up.transition=up.motion.transition,up.animation=up.motion.animation,up.morph=up.motion.morph,up.animate=up.motion.animate}.call(this),function(){var e=[].slice;up.proxy=function(t){var n,r,o,u,i,a,s,l,c,p,f,d,m,h,v,g,y,b,w,k,S,x,D,P,$,A,E,T,C,F,O,U,R;return R=up.util,n=void 0,D=void 0,F=void 0,k=void 0,O=void 0,$=[],p=R.config({slowDelay:300,preloadDelay:75,cacheSize:70,cacheExpiry:3e5,maxRequests:4,wrapMethods:["PATCH","PUT","DELETE"],wrapMethodParam:"_method",safeMethods:["GET","OPTIONS","HEAD"]}),i=function(e){return w(e),[e.url,e.method,e.data,e.target].join("|")},u=R.cache({size:function(){return p.cacheSize},expiry:function(){return p.cacheExpiry},key:i}),f=function(e){var t,n,r,o,i,a,s;for(e=w(e),n=[e],"html"!==e.target&&(a=R.merge(e,{target:"html"}),n.push(a),"body"!==e.target&&(i=R.merge(e,{target:"body"}),n.push(i))),r=0,o=n.length;o>r;r++)if(t=n[r],s=u.get(t))return s},a=function(){return clearTimeout(D),D=null},s=function(){return clearTimeout(F),F=null},E=function(){return n=null,a(),s(),k=0,p.reset(),u.clear(),O=!1,$=[]},E(),w=function(e){return e._normalized||(e.method=R.normalizeMethod(e.method),e.url&&(e.url=R.normalizeUrl(e.url)),e.target||(e.target="body"),e._normalized=!0),e},r=function(){var t,n,r,o,u,i,a;return t=1<=arguments.length?e.call(arguments,0):[],o=R.extractOptions(t),R.isGiven(t[0])&&(o.url=t[0]),n=o.cache===!0,r=o.cache===!1,a=R.only(o,"url","method","data","target","headers","_normalized"),a=w(a),u=!0,m(a)||n?(i=f(a))&&!r?(up.puts("Re-using cached response for %s %s",a.method,a.url),u="pending"===i.state()):(i=y(a),C(a,i),i.fail(function(){return A(a)})):(c(),i=y(a)),u&&!o.preload&&(b(),i.always(g)),console.groupEnd(),i},h=function(){return 0===k},d=function(){return k>0},b=function(){var e,t;return t=h(),k+=1,t?(e=function(){return d()?(up.emit("up:proxy:slow",{message:"Proxy is busy"}),O=!0):void 0},F=R.setTimer(p.slowDelay,e)):void 0},g=function(){return k-=1,h()&&O?(up.emit("up:proxy:recover",{message:"Proxy is idle"}),O=!1):void 0},y=function(e){return k<p.maxRequests?v(e):P(e)},P=function(e){var n,r;return up.puts("Queuing request for %s %s",e.method,e.url),n=t.Deferred(),r={deferred:n,request:e},$.push(r),n.promise()},v=function(e){var n;return up.emit("up:proxy:load",R.merge(e,{message:["Loading %s %s",e.method,e.url]})),e=R.copy(e),e.headers||(e.headers={}),e.headers["X-Up-Target"]=e.target,R.contains(p.wrapMethods,e.method)&&(e.data=R.appendRequestData(e.data,p.wrapMethodParam,e.method),e.method="POST"),R.isFormData(e.data)&&(e.contentType=!1,e.processData=!1),n=t.ajax(e),n.done(function(t,n,r){return T(e,r)}),n.fail(function(t){return T(e,t)}),n},T=function(e,t){var n;return up.emit("up:proxy:received",R.merge(e,{message:["Server responded with %s %s (%d bytes)",t.status,t.statusText,null!=(n=t.responseText)?n.length:void 0]})),S()},S=function(){var t,n;(t=$.shift())&&(n=v(t.request),n.done(function(){var n,r;return n=1<=arguments.length?e.call(arguments,0):[],(r=t.deferred).resolve.apply(r,n)}),n.fail(function(){var n,r;return n=1<=arguments.length?e.call(arguments,0):[],(r=t.deferred).reject.apply(r,n)}))},o=u.alias,C=u.set,A=u.remove,c=u.clear,m=function(e){return w(e),R.contains(p.safeMethods,e.method)},l=function(e){var t,r;return r=parseInt(R.presentAttr(e,"up-delay"))||p.preloadDelay,e.is(n)?void 0:(n=e,a(),t=function(){return x(e),n=null},U(t,r))},U=function(e,t){return D=setTimeout(e,t)},x=function(e,n){var r,o;return r=t(e),n=R.options(n),o=up.link.followMethod(r,n),m({method:o})?up.log.group("Preloading link %o",r,function(){return n.preload=!0,up.follow(r,n)}):(up.puts("Won't preload %o due to unsafe method %s",r,o),R.resolvedPromise())},up.on("mouseover mousedown touchstart","[up-preload]",function(e,t){return up.link.childClicked(e,t)?void 0:l(t)}),up.on("up:framework:reset",E),{preload:x,ajax:r,get:f,alias:o,clear:c,remove:A,isIdle:h,isBusy:d,config:p,defaults:function(){return R.error("up.proxy.defaults(...) no longer exists. Set values on he up.proxy.config property instead.")}}}(jQuery),up.ajax=up.proxy.ajax}.call(this),function(){up.link=function($){var allowDefault,childClicked,follow,followMethod,followVariantSelectors,isFollowable,makeFollowable,onAction,shouldProcessLinkEvent,u,visit;return u=up.util,visit=function(e,t){var n;return t=u.options(t),n=u.option(t.target,"body"),up.replace(n,e,t)},follow=function(e,t){var n,r,o;return n=$(e),t=u.options(t),o=u.option(n.attr("up-href"),n.attr("href")),r=u.option(t.target,n.attr("up-target"),"body"),t.failTarget=u.option(t.failTarget,n.attr("up-fail-target"),"body"),t.transition=u.option(t.transition,u.castedAttr(n,"up-transition"),"none"),t.failTransition=u.option(t.failTransition,u.castedAttr(n,"up-fail-transition"),"none"),t.history=u.option(t.history,u.castedAttr(n,"up-history")),t.reveal=u.option(t.reveal,u.castedAttr(n,"up-reveal"),!0),t.cache=u.option(t.cache,u.castedAttr(n,"up-cache")),t.restoreScroll=u.option(t.restoreScroll,u.castedAttr(n,"up-restore-scroll")),t.method=followMethod(n,t),t.origin=u.option(t.origin,n),t.confirm=u.option(t.confirm,n.attr("up-confirm")),t=u.merge(t,up.motion.animateOptions(t,n)),up.browser.confirm(t).then(function(){return up.replace(r,o,t)})},followMethod=function(e,t){var n;return n=$(e),t=u.options(t),u.option(t.method,n.attr("up-method"),n.attr("data-method"),"get").toUpperCase()},childClicked=function(e,t){var n,r;return n=$(e.target),r=n.closest("a, [up-href]"),r.length&&t.find(r).length},shouldProcessLinkEvent=function(e,t){return u.isUnmodifiedMouseEvent(e)&&!childClicked(e,t)},followVariantSelectors=[],allowDefault=function(){},onAction=function(e,t){var n;return followVariantSelectors.push(e),n=function(e){return up.navigation.withActiveMark(e,{enlarge:!0},function(){return t(e)})},up.on("click","a"+e+", [up-href]"+e,function(e,t){return shouldProcessLinkEvent(e,t)?t.is("[up-instant]")?e.preventDefault():(e.preventDefault(),n(t)):allowDefault(e)}),up.on("mousedown","a"+e+"[up-instant], [up-href]"+e+"[up-instant]",function(e,t){return shouldProcessLinkEvent(e,t)?(e.preventDefault(),n(t)):void 0})},isFollowable=function(e){return u.any(followVariantSelectors,function(t){return e.is(t)})},makeFollowable=function(e){var t;return t=$(e),isFollowable(t)?void 0:t.attr("up-follow","")},onAction("[up-target]",function(e){return follow(e)}),onAction("[up-follow]",function(e){return follow(e)}),up.macro("[up-dash]",{priority:"last"},function(e){var t,n;return n=u.castedAttr(e,"up-dash"),e.removeAttr("up-dash"),t={"up-preload":"","up-instant":""},n===!0?makeFollowable(e):t["up-target"]=n,u.setMissingAttrs(e,t)}),up.macro("[up-expand]",{priority:"last"},function(e){var t,n,r,o,i,a,s,l,c,p;if(t=e.find("a, [up-href]"),(c=e.attr("up-expand"))&&(t=t.filter(c)),i=t.get(0)){for(p=/^up-/,s={},s["up-href"]=$(i).attr("href"),l=i.attributes,r=0,o=l.length;o>r;r++)n=l[r],a=n.name,a.match(p)&&(s[a]=n.value);return u.setMissingAttrs(e,s),e.removeAttr("up-expand"),makeFollowable(e)}}),{knife:eval("undefined"!=typeof Knife&&null!==Knife?Knife.point:void 0),visit:visit,follow:follow,makeFollowable:makeFollowable,shouldProcessLinkEvent:shouldProcessLinkEvent,childClicked:childClicked,followMethod:followMethod,onAction:onAction}}(jQuery),up.visit=up.link.visit,up.follow=up.link.follow}.call(this),function(){var slice=[].slice;up.form=function($){var autosubmit,config,currentValuesForSwitch,observe,observeForm,reset,resolveValidateTarget,submit,switchTargets,u,validate;return u=up.util,config=u.config({validateTargets:["[up-fieldset]:has(&)","fieldset:has(&)","label:has(&)","form:has(&)"],fields:[":input"],observeDelay:0}),reset=function(){return config.reset()},submit=function(e,t){var n,r,o,i,a,s,l;return n=$(e).closest("form"),t=u.options(t),s=u.option(t.target,n.attr("up-target"),"body"),l=u.option(t.url,n.attr("action"),up.browser.url()),t.failTarget=u.option(t.failTarget,n.attr("up-fail-target"))||u.selectorForElement(n),t.history=u.option(t.history,u.castedAttr(n,"up-history"),!0),t.transition=u.option(t.transition,u.castedAttr(n,"up-transition"),"none"),t.failTransition=u.option(t.failTransition,u.castedAttr(n,"up-fail-transition"),"none"),t.method=u.option(t.method,n.attr("up-method"),n.attr("data-method"),n.attr("method"),"post").toUpperCase(),t.headers=u.option(t.headers,{}),t.reveal=u.option(t.reveal,u.castedAttr(n,"up-reveal"),!0),t.cache=u.option(t.cache,u.castedAttr(n,"up-cache")),t.restoreScroll=u.option(t.restoreScroll,u.castedAttr(n,"up-restore-scroll")),t.origin=u.option(t.origin,n),t.data=up.util.requestDataFromForm(n),t=u.merge(t,up.motion.animateOptions(t,n)),i=n.find("input[type=file]").length,r=!i||u.isFormData(t.data),o=up.browser.canPushState()||t.history===!1,t.validate&&(t.headers||(t.headers={}),t.headers["X-Up-Validate"]=t.validate,!r)?u.unresolvablePromise():(up.navigation.markActive(n),r&&o?(a=up.replace(s,l,t),a.always(function(){return up.navigation.unmarkActive(n)}),a):(n.get(0).submit(),u.unresolvablePromise()))},observe=function(){var $element,args,callback,callbackArg,callbackPromise,callbackTimer,changeEvents,check,clearTimer,delay,knownValue,nextCallback,options,rawCallback,runNextCallback,selectorOrElement;return selectorOrElement=arguments[0],args=2<=arguments.length?slice.call(arguments,1):[],options={},callbackArg=void 0,1===args.length&&(callbackArg=args[0]),args.length>1&&(options=u.options(args[0]),callbackArg=args[1]),$element=$(selectorOrElement),options=u.options(options),delay=u.option($element.attr("up-delay"),options.delay,config.observeDelay),delay=parseInt(delay),callback=null,u.isGiven(options.change)&&u.error("up.observe now takes the change callback as the last argument"),rawCallback=u.option(u.presentAttr($element,"op-observe"),callbackArg),callback=u.isString(rawCallback)?function(value,$field){return eval(rawCallback)}:rawCallback||u.error("up.observe: No change callback given"),$element.is("form")?observeForm($element,options,callback):(knownValue=null,callbackTimer=null,callbackPromise=u.resolvedPromise(),nextCallback=null,runNextCallback=function(){var e;return nextCallback?(e=nextCallback(),nextCallback=null,e):void 0},check=function(){var e,t,n;return n=$element.val(),t=u.isNull(knownValue),knownValue===n||(knownValue=n,t)?void 0:(clearTimer(),nextCallback=function(){return callback.apply($element.get(0),[n,$element])},e=function(){return callbackPromise.then(function(){var e;return e=runNextCallback(),callbackPromise=u.isPromise(e)?e:u.resolvedPromise()})},u.setTimer(delay,e))},clearTimer=function(){return clearTimeout(callbackTimer)},changeEvents=up.browser.canInputEvent()?"input change":"input change keypress paste cut click propertychange",$element.on(changeEvents,check),check(),function(){return $element.off(changeEvents,check),clearTimer()})},observeForm=function(e,t,n){var r,o;return r=u.multiSelector(config.fields).find(e),o=u.map(r,function(e){return observe(e,n)}),function(){var e,t,n,r;for(r=[],t=0,n=o.length;n>t;t++)e=o[t],r.push(e());return r}},autosubmit=function(e,t){return observe(e,t,function(e,t){var n;return n=t.closest("form"),up.navigation.withActiveMark(t,function(){return submit(n)})})},resolveValidateTarget=function(e,t){var n;return n=u.option(t.target,e.attr("up-validate")),u.isBlank(n)&&(n||(n=u.detect(config.validateTargets,function(n){var r;return r=up.flow.resolveSelector(n,t.origin),e.closest(r).length}))),u.isBlank(n)&&u.error("Could not find default validation target for %o (tried ancestors %o)",e.get(0),config.validateTargets),u.isString(n)||(n=u.selectorForElement(n)),n},validate=function(e,t){var n,r,o;return n=$(e),t=u.options(t),t.origin=n,t.target=resolveValidateTarget(n,t),t.failTarget=t.target,t.history=!1,t.headers=u.option(t.headers,{}),t.validate=n.attr("name")||"__none__",t=u.merge(t,up.motion.animateOptions(t,n)),r=n.closest("form"),o=up.submit(r,t)},currentValuesForSwitch=function(e){var t,n,r;return r=void 0,e.is("input[type=checkbox]")?r=e.is(":checked")?[":checked",":present",e.val()]:[":unchecked",":blank"]:e.is("input[type=radio]")?(t=e.closest("form, body").find("input[type='radio'][name='"+e.attr("name")+"']:checked"),r=t.length?[":checked",":present",t.val()]:[":unchecked",":blank"]):(n=e.val(),r=u.isPresent(n)?[":present",n]:[":blank"]),r},currentValuesForSwitch=function(e){var t,n,r,o;return e.is("input[type=checkbox]")?e.is(":checked")?(r=e.val(),n=":checked"):n=":unchecked":e.is("input[type=radio]")?(t=e.closest("form, body").find("input[type='radio'][name='"+e.attr("name")+"']:checked"),t.length?(n=":checked",r=t.val()):n=":unchecked"):r=e.val(),o=[],u.isPresent(r)?(o.push(r),o.push(":present")):o.push(":blank"),u.isPresent(n)&&o.push(n),o},switchTargets=function(e,t){var n,r,o;return n=$(e),t=u.options(t),o=u.option(t.target,n.attr("up-switch")),u.isPresent(o)||u.error("No switch target given for %o",n.get(0)),r=currentValuesForSwitch(n),$(o).each(function(){var e,t,n,o;return e=$(this),(t=e.attr("up-hide-for"))?(t=t.split(" "),n=0===u.intersect(r,t).length):(o=(o=e.attr("up-show-for"))?o.split(" "):[":present",":checked"],n=u.intersect(r,o).length>0),e.toggle(n)})},up.on("submit","form[up-target]",function(e,t){return e.preventDefault(),submit(t)}),up.on("change","[up-validate]",function(e,t){return validate(t)}),up.on("change","[up-switch]",function(e,t){return switchTargets(t)}),up.compiler("[up-switch]",function(e){return switchTargets(e)}),up.compiler("[up-observe]",function(e){return observe(e)}),up.compiler("[up-autosubmit]",function(e){return autosubmit(e)}),up.on("up:framework:reset",reset),{knife:eval("undefined"!=typeof Knife&&null!==Knife?Knife.point:void 0),config:config,submit:submit,observe:observe,validate:validate,switchTargets:switchTargets}}(jQuery),up.submit=up.form.submit,up.observe=up.form.observe,up.autosubmit=up.form.autosubmit,up.validate=up.form.validate}.call(this),function(){up.popup=function($){var attach,autoclose,close,config,contains,coveredUrl,createFrame,currentUrl,discardHistory,ensureInViewport,isOpen,reset,setPosition,u;return u=up.util,currentUrl=void 0,coveredUrl=function(){return $(".up-popup").attr("up-covered-url")},config=u.config({openAnimation:"fade-in",closeAnimation:"fade-out",openDuration:null,closeDuration:null,openEasing:null,closeEasing:null,position:"bottom-right",history:!1}),reset=function(){return close({animation:!1}),config.reset()},setPosition=function(e,t){var n,r,o;return o=u.measure(e,{full:!0}),r=function(){switch(t){case"bottom-right":return{right:o.right,top:o.top+o.height};case"bottom-left":return{left:o.left,top:o.top+o.height};case"top-right":return{right:o.right,bottom:o.top};case"top-left":return{left:o.left,bottom:o.top};default:return u.error("Unknown position option '%s'",t)}}(),n=$(".up-popup"),n.attr("up-position",t),n.css(r),ensureInViewport(n)},ensureInViewport=function(e){var t,n,r,o,i,a,s;if(n=u.measure(e,{full:!0}),r=null,o=null,n.right<0&&(r=-n.right),n.bottom<0&&(o=-n.bottom),n.left<0&&(r=n.left),n.top<0&&(o=n.top),r&&((i=parseInt(e.css("left")))?e.css("left",i-r):(a=parseInt(e.css("right")))&&e.css("right",a+r)),o){if(s=parseInt(e.css("top")))return e.css("top",s-o);if(t=parseInt(e.css("bottom")))return e.css("bottom",t+o)}},discardHistory=function(){var e;return e=$(".up-popup"),e.removeAttr("up-covered-url"),e.removeAttr("up-covered-title")},createFrame=function(e,t){var n;return n=u.resolvedPromise(),isOpen()&&(n=n.then(function(){return close()})),n=n.then(function(){var n;return n=u.$createElementFromSelector(".up-popup"),t.sticky&&n.attr("up-sticky",""),n.attr("up-covered-url",up.browser.url()),n.attr("up-covered-title",document.title),u.$createPlaceholder(e,n),n.appendTo(document.body),n})},isOpen=function(){return $(".up-popup").length>0},attach=function(e,t){var n,r,o,i,a;return n=$(e),n.length||u.error("Cannot attach popup to non-existing element %o",e),t=u.options(t),a=u.option(u.pluckKey(t,"url"),n.attr("up-href"),n.attr("href")),o=u.option(u.pluckKey(t,"html")),i=u.option(u.pluckKey(t,"target"),n.attr("up-popup"),"body"),t.position=u.option(t.position,n.attr("up-position"),config.position),t.animation=u.option(t.animation,n.attr("up-animation"),config.openAnimation),t.sticky=u.option(t.sticky,u.castedAttr(n,"up-sticky"),config.sticky),t.history=up.browser.canPushState()?u.option(t.history,u.castedAttr(n,"up-history"),config.history):!1,t.confirm=u.option(t.confirm,n.attr("up-confirm")),r=up.motion.animateOptions(t,n,{duration:config.openDuration,easing:config.openEasing}),up.browser.confirm(t).then(function(){var e,s;return up.bus.nobodyPrevents("up:popup:open",{url:a,message:"Opening popup"})?(t.beforeSwap=function(){return createFrame(i,t)},e=u.merge(t,{animation:!1}),s=o?up.extract(i,o,e):up.replace(i,a,e),s=s.then(function(){return setPosition(n,t.position)}),s=s.then(function(){return up.animate($(".up-popup"),t.animation,r)}),s=s.then(function(){return up.emit("up:popup:opened",{message:"Popup opened"})})):u.unresolvablePromise()})},close=function(e){var t,n,r;return t=$(".up-popup"),t.length?up.bus.nobodyPrevents("up:popup:close",{$element:t})?(e=u.options(e,{animation:config.closeAnimation,url:t.attr("up-covered-url"),title:t.attr("up-covered-title")}),n=up.motion.animateOptions(e,{duration:config.closeDuration,easing:config.closeEasing}),u.extend(e,n),currentUrl=void 0,r=up.destroy(t,e),r=r.then(function(){return up.emit("up:popup:closed",{message:"Popup closed"})})):u.unresolvablePromise():u.resolvedPromise()},autoclose=function(){return $(".up-popup").is("[up-sticky]")?void 0:(discardHistory(),close())},contains=function(e){var t;return t=$(e),t.closest(".up-popup").length>0},up.link.onAction("[up-popup]",function(e){return e.is(".up-current")?close():attach(e)}),up.on("click","body",function(e){var t;return t=$(e.target),t.closest(".up-popup").length||t.closest("[up-popup]").length?void 0:close()}),up.on("up:fragment:inserted",function(e,t){var n;if(contains(t)){if(n=t.attr("up-source"))return currentUrl=n}else if(contains(e.origin))return autoclose()}),up.bus.onEscape(function(){return close()}),up.on("click","[up-close]",function(e,t){return t.closest(".up-popup").length?(close(),e.preventDefault()):void 0}),up.on("up:framework:reset",reset),{knife:eval("undefined"!=typeof Knife&&null!==Knife?Knife.point:void 0),attach:attach,close:close,url:function(){return currentUrl},coveredUrl:coveredUrl,config:config,defaults:function(){return u.error("up.popup.defaults(...) no longer exists. Set values on he up.popup.config property instead.")},contains:contains,open:function(){return up.error("up.popup.open no longer exists. Please use up.popup.attach instead.")},source:function(){return up.error("up.popup.source no longer exists. Please use up.popup.url instead.")},isOpen:isOpen}}(jQuery)}.call(this),function(){up.modal=function($){var animate,autoclose,close,config,contains,coveredUrl,createFrame,currentFlavor,currentUrl,discardHistory,extract,flavor,flavorDefault,flavorOverrides,follow,isOpen,markAsAnimating,open,reset,shiftElements,templateHtml,u,unshiftElements,unshifters,visit;return u=up.util,config=u.config({maxWidth:null,minWidth:null,width:null,height:null,history:!0,openAnimation:"fade-in",closeAnimation:"fade-out",openDuration:null,closeDuration:null,openEasing:null,closeEasing:null,backdropOpenAnimation:"fade-in",backdropCloseAnimation:"fade-out",closeLabel:"\xd7",flavors:{"default":{}},template:function(){return'<div class="up-modal">\n  <div class="up-modal-backdrop"></div>\n  <div class="up-modal-viewport">\n    <div class="up-modal-dialog">\n      <div class="up-modal-content"></div>\n      <div class="up-modal-close" up-close>'+flavorDefault("closeLabel")+"</div>\n    </div>\n  </div>\n</div>"}}),currentUrl=void 0,currentFlavor=void 0,coveredUrl=function(){return $(".up-modal").attr("up-covered-url")},reset=function(){return close({animation:!1}),currentUrl=void 0,currentFlavor=void 0,config.reset()},templateHtml=function(){var e;return e=flavorDefault("template"),u.isFunction(e)?e(config):e},discardHistory=function(){var e;return e=$(".up-modal"),e.removeAttr("up-covered-url"),e.removeAttr("up-covered-title")},createFrame=function(e,t){var n;return n=u.resolvedPromise(),isOpen()&&(n=n.then(function(){return close()})),n=n.then(function(){var n,r,o;return currentFlavor=t.flavor,o=$(templateHtml()),o.attr("up-flavor",currentFlavor),t.sticky&&o.attr("up-sticky",""),o.attr("up-covered-url",up.browser.url()),o.attr("up-covered-title",document.title),r=o.find(".up-modal-dialog"),u.isPresent(t.width)&&r.css("width",t.width),u.isPresent(t.maxWidth)&&r.css("max-width",t.maxWidth),u.isPresent(t.height)&&r.css("height",t.height),n=o.find(".up-modal-content"),u.$createPlaceholder(e,n),o.appendTo(document.body)})},unshifters=[],shiftElements=function(){var e,t,n,r,o;if(!(unshifters.length>0))return u.documentHasVerticalScrollbar()?(e=$("body"),r=u.scrollbarWidth(),t=parseInt(e.css("padding-right")),n=r+t,o=u.temporaryCss(e,{"padding-right":n+"px","overflow-y":"hidden"}),unshifters.push(o),up.layout.anchoredRight().each(function(){var e,t,n,o;return e=$(this),t=parseInt(e.css("right")),n=r+t,o=u.temporaryCss(e,{right:n}),unshifters.push(o)})):void 0},unshiftElements=function(){var e,t;for(e=[];t=unshifters.pop();)e.push(t());return e},isOpen=function(){return $(".up-modal").length>0},follow=function(e,t){return t=u.options(t),t.$link=$(e),open(t)},visit=function(e,t){return t=u.options(t),t.url=e,open(t)},extract=function(e,t,n){return n=u.options(n),n.html=t,n.history=u.option(n.history,!1),n.target=e,open(n)},open=function(e){var t,n,r,o,i;return e=u.options(e),t=u.option(u.pluckKey(e,"$link"),u.nullJQuery()),i=u.option(u.pluckKey(e,"url"),t.attr("up-href"),t.attr("href")),r=u.option(u.pluckKey(e,"html")),o=u.option(u.pluckKey(e,"target"),t.attr("up-modal"),"body"),e.flavor=u.option(e.flavor,t.attr("up-flavor")),e.width=u.option(e.width,t.attr("up-width"),flavorDefault("width",e.flavor)),e.maxWidth=u.option(e.maxWidth,t.attr("up-max-width"),flavorDefault("maxWidth",e.flavor)),e.height=u.option(e.height,t.attr("up-height"),flavorDefault("height")),e.animation=u.option(e.animation,t.attr("up-animation"),flavorDefault("openAnimation",e.flavor)),e.backdropAnimation=u.option(e.backdropAnimation,t.attr("up-backdrop-animation"),flavorDefault("backdropOpenAnimation",e.flavor)),e.sticky=u.option(e.sticky,u.castedAttr(t,"up-sticky"),flavorDefault("sticky",e.flavor)),e.confirm=u.option(e.confirm,t.attr("up-confirm")),n=up.motion.animateOptions(e,t,{duration:flavorDefault("openDuration",e.flavor),easing:flavorDefault("openEasing",e.flavor)}),e.history=u.option(e.history,u.castedAttr(t,"up-history"),flavorDefault("history",e.flavor)),up.browser.canPushState()||(e.history=!1),up.browser.confirm(e).then(function(){var t,a;
return up.bus.nobodyPrevents("up:modal:open",{url:i,message:"Opening modal"})?(e.beforeSwap=function(){return createFrame(o,e)},t=u.merge(e,{animation:!1}),a=r?up.extract(o,r,t):up.replace(o,i,t),a=a.then(function(){return shiftElements()}),a=a.then(function(){return animate(e.animation,e.backdropAnimation,n)}),a=a.then(function(){return up.emit("up:modal:opened",{message:"Modal opened"})})):u.unresolvablePromise()})},close=function(e){var t,n,r,o,i;return e=u.options(e),t=$(".up-modal"),t.length?up.bus.nobodyPrevents("up:modal:close",{$element:t,message:"Closing modal"})?(i=u.option(e.animation,flavorDefault("closeAnimation")),r=u.option(e.backdropAnimation,flavorDefault("backdropCloseAnimation")),n=up.motion.animateOptions(e,{duration:flavorDefault("closeDuration"),easing:flavorDefault("closeEasing")}),o=u.resolvedPromise(),o=o.then(function(){return animate(i,r,n)}),o=o.then(function(){var n;return n=u.options(u.except(e,"animation","duration","easing","delay"),{url:t.attr("up-covered-url"),title:t.attr("up-covered-title")}),currentUrl=void 0,up.destroy(t,n)}),o=o.then(function(){return unshiftElements(),currentFlavor=void 0,up.emit("up:modal:closed",{message:"Modal closed"})})):u.unresolvablePromise():u.resolvedPromise()},markAsAnimating=function(e){return null==e&&(e=!0),$(".up-modal").toggleClass("up-modal-animating",e)},animate=function(e,t,n){var r;return up.motion.isNone(e)?u.resolvedPromise():(markAsAnimating(),r=$.when(up.animate($(".up-modal-viewport"),e,n),up.animate($(".up-modal-backdrop"),t,n)),r=r.then(function(){return markAsAnimating(!1)}))},autoclose=function(){return $(".up-modal").is("[up-sticky]")?void 0:(discardHistory(),close())},contains=function(e){var t;return t=$(e),t.closest(".up-modal").length>0},flavor=function(e,t){return null==t&&(t={}),u.extend(flavorOverrides(e),t)},flavorOverrides=function(e){var t;return(t=config.flavors)[e]||(t[e]={})},flavorDefault=function(e,t){var n;return null==t&&(t=currentFlavor),t&&(n=flavorOverrides(t)[e]),u.isMissing(n)&&(n=config[e]),n},up.link.onAction("[up-modal]",function(e){return follow(e)}),up.on("click","body",function(e){var t;return t=$(e.target),t.closest(".up-modal-dialog").length||t.closest("[up-modal]").length?void 0:close()}),up.on("up:fragment:inserted",function(e,t){var n;if(contains(t)){if(n=t.attr("up-source"))return currentUrl=n}else if(!up.popup.contains(t)&&contains(e.origin))return autoclose()}),up.bus.onEscape(function(){return close()}),up.on("click","[up-close]",function(e,t){return t.closest(".up-modal").length?(close(),e.preventDefault()):void 0}),up.on("up:framework:reset",reset),{knife:eval("undefined"!=typeof Knife&&null!==Knife?Knife.point:void 0),visit:visit,follow:follow,extract:extract,open:function(){return up.error("up.modal.open no longer exists. Please use either up.modal.follow or up.modal.visit.")},close:close,url:function(){return currentUrl},coveredUrl:coveredUrl,config:config,defaults:function(){return u.error("up.modal.defaults(...) no longer exists. Set values on he up.modal.config property instead.")},contains:contains,source:function(){return up.error("up.modal.source no longer exists. Please use up.popup.url instead.")},isOpen:isOpen,flavor:flavor}}(jQuery)}.call(this),function(){up.tooltip=function(e){var t,n,r,o,u,i,a;return a=up.util,r=a.config({position:"top",openAnimation:"fade-in",closeAnimation:"fade-out"}),u=function(){return n({animation:!1}),r.reset()},i=function(e,t,n){var r,o,u;return o=a.measure(e),u=a.measure(t),r=function(){switch(n){case"top":return{left:o.left+.5*(o.width-u.width),top:o.top-u.height};case"left":return{left:o.left-u.width,top:o.top+.5*(o.height-u.height)};case"right":return{left:o.left+o.width,top:o.top+.5*(o.height-u.height)};case"bottom":return{left:o.left+.5*(o.width-u.width),top:o.top+o.height};default:return a.error("Unknown position option '%s'",n)}}(),t.attr("up-position",n),t.css(r)},o=function(e){var t;return t=a.$createElementFromSelector(".up-tooltip"),a.isGiven(e.text)?t.text(e.text):t.html(e.html),t.appendTo(document.body),t},t=function(t,u){var s,l,c,p,f,d,m;return null==u&&(u={}),s=e(t),f=a.option(u.html,s.attr("up-tooltip-html")),m=a.option(u.text,s.attr("up-tooltip")),d=a.option(u.position,s.attr("up-position"),r.position),p=a.option(u.animation,a.castedAttr(s,"up-animation"),r.openAnimation),c=up.motion.animateOptions(u,s),n(),l=o({text:m,html:f}),i(s,l,d),up.animate(l,p,c)},n=function(t){var n;return n=e(".up-tooltip"),n.length?(t=a.options(t,{animation:r.closeAnimation}),t=a.merge(t,up.motion.animateOptions(t)),up.destroy(n,t)):void 0},up.compiler("[up-tooltip], [up-tooltip-html]",function(e){return e.on("mouseover",function(){return t(e)}),e.on("mouseout",function(){return n()})}),up.on("click","body",function(){return n()}),up.on("up:framework:reset",n),up.bus.onEscape(function(){return n()}),up.on("up:framework:reset",u),{attach:t,close:n,open:function(){return a.error("up.tooltip.open no longer exists. Use up.tooltip.attach instead.")}}}(jQuery)}.call(this),function(){var e=[].slice;up.navigation=function(t){var n,r,o,u,i,a,s,l,c,p,f,d,m,h;return f=up.util,o=f.config({currentClasses:["up-current"]}),c=function(){return o.reset()},u=function(){var e;return e=o.currentClasses,e=e.concat(["up-current"]),e=f.uniq(e),e.join(" ")},n="up-active",r="a, [up-href]",l=function(e){return f.isPresent(e)?f.normalizeUrl(e,{search:!1,stripTrailingSlash:!0}):void 0},p=function(e){var t,n,r,o,u,i,a,s,c,p;for(s=[],i=["href","up-href","up-alias"],n=0,o=i.length;o>n;n++)if(t=i[n],c=f.presentAttr(e,t))for(p="up-alias"===t?c.split(" "):[c],r=0,u=p.length;u>r;r++)a=p[r],"#"!==a&&(a=l(a),s.push(a));return s},m=function(e){var t,n,r,o;return e=f.compact(e),r=function(e){return"*"===e.substr(-1)?n(e.slice(0,-1)):t(e)},t=function(t){return f.contains(e,t)},n=function(t){return f.detect(e,function(e){return 0===e.indexOf(t)})},o=function(e){return f.detect(e,r)},{matchesAny:o}},a=function(){var e,n;return e=m([l(up.browser.url()),l(up.modal.url()),l(up.modal.coveredUrl()),l(up.popup.url()),l(up.popup.coveredUrl())]),n=u(),f.each(t(r),function(r){var o,u;return o=t(r),u=p(o),e.matchesAny(u)?o.addClass(n):o.hasClass(n)&&0===o.closest(".up-destroying").length?o.removeClass(n):void 0})},i=function(e,n){var o;return o=t(e),n=f.options(n,{enlarge:!1}),n.enlarge?f.presence(o.parent(r))||o:o},s=function(e,t){var r;return r=i(e,t),r.addClass(n)},d=function(e,t){var r;return r=i(e,t),r.removeClass(n)},h=function(){var n,r,o,u,i,a;return u=arguments[0],r=2<=arguments.length?e.call(arguments,1):[],o=r.pop(),i=f.options(r.pop()),n=t(u),s(n,i),a=o(),f.isPromise(a)?a.always(function(){return d(n,i)}):up.warn("Expected block to return a promise, but got %o",a),a},up.on("up:fragment:inserted",function(){return a()}),up.on("up:fragment:destroyed",function(e,t){return t.is(".up-modal, .up-popup")?a():void 0}),up.on("up:framework:reset",c),{config:o,defaults:function(){return f.error("up.navigation.defaults(...) no longer exists. Set values on he up.navigation.config property instead.")},markActive:s,unmarkActive:d,withActiveMark:h}}(jQuery)}.call(this),function(){up.rails=function(e){var t,n,r,o;return r=up.util,o=function(e){return e.is("[up-follow], [up-target], [up-modal], [up-popup]")},n=function(){return r.isGiven(e.rails)},r.each(["method","confirm"],function(e){var t,u;return t="data-"+e,u="up-"+e,up.compiler("["+t+"]",function(e){var i;return n()&&o(e)?(i={},i[u]=e.attr(t),r.setMissingAttrs(e,i),e.removeAttr(t)):void 0})}),t=function(){return n()?{name:e.rails.csrfParam(),value:e.rails.csrfToken()}:void 0},{csrfField:t,isRails:n}}(jQuery)}.call(this),function(){up.boot()}.call(this);