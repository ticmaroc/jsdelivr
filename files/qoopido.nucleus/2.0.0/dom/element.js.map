{"version":3,"sources":["dom/element.js"],"names":["global","document","definition","isObject","isInstanceOf","isTypeOf","base","Event","hooksCss","supportMethod","functionDescriptorGenerate","functionUniqueUuid","emitEvent","type","detail","uuid","event","self","this","createEvent","initCustomEvent","_quid","isDelegate","node","dispatchEvent","defaultPrevented","resolveElement","element","regexMatchTag","test","createElement","replace","toLowerCase","querySelector","exception","NULL","Error","resolveArguments","parameters","arrayPrototypeConcat","apply","arrayPrototypeSlice","join","split","regexMatchSpaces","matchesDelegate","delegate","pointer","i","path","STRING_MATCHES","currentTarget","DomElement","attributes","styles","listener","objectDefineProperty","objectDefineProperties","nodeName","setAttributes","setStyles","getSiblings","method","selector","limit","strict","multiple","siblings","call","nodeType","push","getParents","parents","parentNode","documentBody","body","getElementsByTagName","Array","prototype","concat","slice","Object","defineProperty","defineProperties","head","STRING_UNDEFINED","STRING_STRING","STRING_CONTENTATTRIBUTE","regexMatchChildSeclector","previousSibling","previousElementSibling","nextSibling","nextElementSibling","clone","cloneNode","getPosition","bbox","getBoundingClientRect","left","scrollLeft","top","scrollTop","getOffset","viewport","offsetLeft","offsetTop","getWidth","includeMargin","style","width","offsetWidth","getComputedStyle","parseInt","marginLeft","marginRight","getHeight","height","offsetHeight","marginTop","marginBottom","getContent","getHtml","innerHTML","getAttribute","attribute","getAttributes","result","arguments","getStyle","property","process","getStyles","properties","getSiblingBefore","getSiblingAfter","getSiblingsBefore","getSiblingsAfter","getChildren","matches","match","setAttribute","querySelectorAll","removeAttribute","childNodes","getParent","hasChild","child","contains","hasClass","name","RegExp","className","isVisible","setContent","source","isHtml","value","length","removeAttributes","setStyle","removeStyle","removeStyles","addClass","removeClass","trim","toggleClass","prepend","target","firstChild","insertBefore","append","insertAdjacentHTML","appendChild","prependTo","appendTo","insertAfter","replaceChild","replaceWith","detach","removeChild","on","events","fn","id","handler","delegateTo","isPropagationStopped","originalEvent","addEventListener","one","each","off","removeEventListener","emit","data","extend","provide"],"mappings":"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","file":"dom/element.js","sourcesContent":["/**\n * Qoopido dom/element\n *\n * Provides additional methods for DOM elements\n *\n * Copyright (c) 2015 Dirk Lueth\n *\n * Dual licensed under the MIT and GPL licenses.\n *  - http://www.opensource.org/licenses/mit-license.php\n *  - http://www.gnu.org/copyleft/gpl.html\n *\n * @author Dirk Lueth <info@qoopido.com>\n *\n * @use /demand/validator/isObject\n * @use /demand/validator/isInstanceOf\n * @use /demand/validator/isTypeOf\n *\n * @require ../base\n * @require ./event\n * @require ../hook/css\n * @require ../function/descriptor/generate\n * @require ../function/unique/uuid\n * @require ../function/unique/uuid\n */\n\n(function(global, document) {\n\t'use strict';\n\n\tfunction definition(isObject, isInstanceOf, isTypeOf, base, Event, hooksCss, supportMethod, functionDescriptorGenerate, functionUniqueUuid) {\n\t\tvar //shortcuts\n\t\t\tdocumentBody             = document.body || document.getElementsByTagName('body')[0],\n\t\t\tarrayPrototypeConcat     = Array.prototype.concat,\n\t\t\tarrayPrototypeSlice      = Array.prototype.slice,\n\t\t\tobjectDefineProperty     = Object.defineProperty,\n\t\t\tobjectDefineProperties   = Object.defineProperties,\n\t\t\thead                     = document.getElementsByTagName('head')[0],\n\t\t\t// constants\n\t\t\tNULL                     = null,\n\t\t\tSTRING_UNDEFINED         = 'undefined',\n\t\t\tSTRING_STRING            = 'string',\n\t\t\tSTRING_CONTENTATTRIBUTE  = ('textContent' in document.createElement('a')) ? 'textContent' : 'innerText',\n\t\t\tSTRING_MATCHES           = supportMethod('matches', documentBody) || supportMethod('matchesSelector', documentBody),\n\t\t\t// regular expressions\n\t\t\tregexMatchTag            = /^<(\\w+)\\s*\\/>$/,\n\t\t\tregexMatchSpaces         = / +/g,\n\t\t\tregexMatchChildSeclector = /^\\s*^/,\n\t\t\t// methods\n\t\t\tpreviousSibling          = (!isTypeOf(head.previousElementSibling, STRING_UNDEFINED)) ? function previousSibling() { return this.previousElementSibling; } : function previousSibling() { var element = this; while(element = element.previousSibling) { if(element.nodeType === 1 ) { return element; } } },\n\t\t\tnextSibling              = (!isTypeOf(head.nextElementSibling, STRING_UNDEFINED)) ? function nextSibling() { return this.nextElementSibling; } : function nextSibling() { var element = this; while(element = element.nextSibling) { if(element.nodeType === 1 ) { return element; } } },\n\t\t\t// flags\n\t\t\t// general storage & objects\n\t\t\tlistener                 = {};\n\n\t\tfunction emitEvent(type, detail, uuid) {\n\t\t\tvar self = this,\n\t\t\t\tevent;\n\n\t\t\tevent = document.createEvent('CustomEvent');\n\t\t\tevent.initCustomEvent(type, (type === 'load') ? false : true, true, detail);\n\n\t\t\tif(uuid) {\n\t\t\t\tevent._quid      = uuid;\n\t\t\t\tevent.isDelegate = true;\n\t\t\t}\n\n\t\t\tself.node.dispatchEvent(event);\n\n\t\t\tif(self.node !== global && !event.defaultPrevented && typeof self.node[type] === 'function') {\n\t\t\t\tself.node[type]();\n\t\t\t}\n\t\t}\n\n\t\tfunction resolveElement(element) {\n\t\t\tif(typeof element === 'string') {\n\t\t\t\ttry {\n\t\t\t\t\tif(regexMatchTag.test(element)) {\n\t\t\t\t\t\telement = document.createElement(element.replace(regexMatchTag, '$1').toLowerCase());\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement = document.querySelector(element);\n\t\t\t\t\t}\n\t\t\t\t} catch(exception) {\n\t\t\t\t\telement = NULL;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!element) {\n\t\t\t\tthrow new Error('Element could not be resolved');\n\t\t\t}\n\n\t\t\treturn element;\n\t\t}\n\n\t\tfunction resolveArguments(parameters) {\n\t\t\treturn arrayPrototypeConcat.apply([], arrayPrototypeSlice(parameters)).join(' ').split(regexMatchSpaces);\n\t\t}\n\n\t\tfunction matchesDelegate(event, delegate) {\n\t\t\tvar i = 0, pointer;\n\n\t\t\tfor(; pointer = event.path[i]; i++) {\n\t\t\t\tif(pointer[STRING_MATCHES](delegate)) {\n\t\t\t\t\tevent.currentTarget = pointer;\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif(pointer === event.currentTarget) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction DomElement(element, attributes, styles) {\n\t\t\tvar self = this,\n\t\t\t\tuuid;\n\n\t\t\telement = resolveElement(element);\n\t\t\tuuid    = element._quid;\n\n\t\t\tif(!uuid) {\n\t\t\t\tuuid           = functionUniqueUuid();\n\t\t\t\tlistener[uuid] = {};\n\n\t\t\t\tobjectDefineProperty(element, '_quid', functionDescriptorGenerate(uuid));\n\t\t\t}\n\n\t\t\tobjectDefineProperties(self, {\n\t\t\t\tuuid: functionDescriptorGenerate(uuid),\n\t\t\t\ttype: functionDescriptorGenerate(element === global ? '#window' : element.nodeName),\n\t\t\t\tnode: functionDescriptorGenerate(element)\n\t\t\t});\n\n\t\t\tif(isObject(attributes)) {\n\t\t\t\tself.setAttributes(attributes);\n\t\t\t}\n\n\t\t\tif(isObject(styles)) {\n\t\t\t\tself.setStyles(styles);\n\t\t\t}\n\n\t\t\treturn self;\n\t\t}\n\n\t\tfunction getSiblings(pointer, method, selector, limit, strict) {\n\t\t\tvar multiple = !(limit && limit === 1),\n\t\t\t\tsiblings = multiple ? [] : false;\n\n\t\t\tstrict = multiple ? false : strict;\n\n\t\t\twhile(pointer = method.call(pointer)) {\n\t\t\t\tif(pointer.nodeType === 1) {\n\t\t\t\t\tif(!selector || pointer[STRING_MATCHES](selector)) {\n\t\t\t\t\t\tif(multiple) {\n\t\t\t\t\t\t\tsiblings.push(pointer);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn pointer;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(strict) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn siblings;\n\t\t}\n\n\t\tfunction getParents(pointer, selector, limit, strict) {\n\t\t\tvar multiple = !(limit && limit === 1),\n\t\t\t\tparents = multiple ? [] : false;\n\n\t\t\tstrict   = multiple ? false : strict;\n\n\t\t\twhile(pointer = pointer.parentNode) {\n\t\t\t\tif(pointer.nodeType === 1) {\n\t\t\t\t\tif(!selector || pointer[STRING_MATCHES](selector)) {\n\t\t\t\t\t\tif(multiple) {\n\t\t\t\t\t\t\tparents.push(pointer);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn pointer;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(strict) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn parents\n\t\t}\n\n\t\tDomElement.prototype = {\n\t\t\t/* only for reference\n\t\t\t uuid: NULL,\n\t\t\t type: NULL,\n\t\t\t node: NULL\n\t\t\t */\n\t\t\tclone: function() {\n\t\t\t\treturn new DomElement(this.node.cloneNode(true));\n\t\t\t},\n\t\t\tgetPosition: function() {\n\t\t\t\tvar bbox = this.node.getBoundingClientRect();\n\n\t\t\t\treturn {\n\t\t\t\t\tleft: bbox.left + documentBody.scrollLeft,\n\t\t\t\t\ttop:  bbox.top + documentBody.scrollTop\n\t\t\t\t};\n\t\t\t},\n\t\t\tgetOffset: function(viewport) {\n\t\t\t\tvar node = this.node,\n\t\t\t\t\tbbox = viewport ? node.getBoundingClientRect() : null;\n\n\t\t\t\treturn {\n\t\t\t\t\tleft: viewport ? bbox.left : node.offsetLeft,\n\t\t\t\t\ttop:  viewport ? bbox.top : node.offsetTop\n\t\t\t\t};\n\t\t\t},\n\t\t\tgetWidth: function(includeMargin) {\n\t\t\t\tvar node  = this.node,\n\t\t\t\t\twidth = node.offsetWidth,\n\t\t\t\t\tstyle;\n\n\t\t\t\tif(includeMargin) {\n\t\t\t\t\tstyle = getComputedStyle(node);\n\n\t\t\t\t\twidth += parseInt(style.marginLeft) + parseInt(style.marginRight);\n\t\t\t\t}\n\n\t\t\t\treturn width;\n\t\t\t},\n\t\t\tgetHeight: function(includeMargin) {\n\t\t\t\tvar node   = this.node,\n\t\t\t\t\theight = node.offsetHeight,\n\t\t\t\t\tstyle;\n\n\t\t\t\tif(includeMargin) {\n\t\t\t\t\tstyle = getComputedStyle(node);\n\n\t\t\t\t\theight += parseInt(style.marginTop) + parseInt(style.marginBottom);\n\t\t\t\t}\n\n\t\t\t\treturn height;\n\t\t\t},\n\t\t\tgetContent: function(getHtml) {\n\t\t\t\tvar node = this.node;\n\n\t\t\t\treturn getHtml ? node.innerHTML : node[STRING_CONTENTATTRIBUTE];\n\t\t\t},\n\t\t\tgetAttribute: function(attribute) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(isTypeOf(attribute, STRING_STRING)) {\n\t\t\t\t\treturn self.node.getAttribute(attribute);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetAttributes: function() {\n\t\t\t\tvar self       = this,\n\t\t\t\t\tresult     = {},\n\t\t\t\t\tattributes = resolveArguments(arguments),\n\t\t\t\t\ti = 0, attribute;\n\n\t\t\t\tfor(; attribute = attributes[i]; i++) {\n\t\t\t\t\tresult[attribute] = self.node.getAttribute(attribute);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\tgetStyle: function(property) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(isTypeOf(property, STRING_STRING)) {\n\t\t\t\t\treturn hooksCss.process('get', self.node, property);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetStyles: function() {\n\t\t\t\tvar self       = this,\n\t\t\t\t\tresult     = {},\n\t\t\t\t\tproperties = resolveArguments(arguments),\n\t\t\t\t\ti = 0, property;\n\n\t\t\t\tfor(; property = properties[i]; i++) {\n\t\t\t\t\tresult[property] = hooksCss.process('get', self.node, property);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\tgetSiblingBefore: function(selector, strict) {\n\t\t\t\treturn getSiblings(this.node, previousSibling, selector, 1, strict);\n\t\t\t},\n\t\t\tgetSiblingAfter: function(selector, strict) {\n\t\t\t\treturn getSiblings(this.node, nextSibling, selector, 1, strict);\n\t\t\t},\n\t\t\tgetSiblings: function(selector) {\n\t\t\t\treturn this.getSiblingsBefore(selector).concat(this.getSiblingsAfter(selector));\n\t\t\t},\n\t\t\tgetSiblingsBefore: function(selector) {\n\t\t\t\treturn getSiblings(this.node, previousSibling, selector);\n\t\t\t},\n\t\t\tgetSiblingsAfter: function(selector) {\n\t\t\t\treturn getSiblings(this.node, nextSibling, selector);\n\t\t\t},\n\t\t\tgetChildren: function(selector) {\n\t\t\t\tvar self = this.node,\n\t\t\t\t\tuuid, matches, i, match;\n\n\t\t\t\tif(!selector) {\n\t\t\t\t\tmatches = [];\n\n\t\t\t\t\tfor(i = 0; match = self.childNodes[i]; i++) {\n\t\t\t\t\t\tif(match.nodeType === 1) {\n\t\t\t\t\t\t\tmatches.push(match);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if(regexMatchChildSeclector.test(selector)) {\n\t\t\t\t\tuuid = self._quid;\n\n\t\t\t\t\tself.setAttribute('nucleus-uuid', uuid);\n\n\t\t\t\t\tselector = '[nucleus-uuid=\"' + uuid + '\"] ' + selector;\n\t\t\t\t\tmatches  = arrayPrototypeSlice.call(self.parentNode.querySelectorAll(selector));\n\n\t\t\t\t\tself.removeAttribute('nucleus-uuid');\n\t\t\t\t} else {\n\t\t\t\t\tmatches = arrayPrototypeSlice.call(self.querySelectorAll(selector));\n\t\t\t\t}\n\n\t\t\t\treturn matches;\n\t\t\t},\n\t\t\tgetParent: function(selector, strict) {\n\t\t\t\treturn getParents(this.node, selector, 1, strict);\n\t\t\t},\n\t\t\tgetParents: function(selector) {\n\t\t\t\treturn getParents(this.node, selector);\n\t\t\t},\n\t\t\thasChild: function(child) {\n\t\t\t\tvar node = this.node;\n\n\t\t\t\treturn node !== child && node.contains(child.node || child);\n\t\t\t},\n\t\t\thasClass: function(name) {\n\t\t\t\treturn (name) ? (new RegExp('(?:^|\\\\s)' + name + '(?:\\\\s|$)')).test(this.node.className) : false;\n\t\t\t},\n\t\t\tisVisible: function() {\n\t\t\t\tvar self = this,\n\t\t\t\t\tnode = self.node;\n\n\t\t\t\treturn !((node.offsetWidth <= 0 && node.offsetHeight <= 0) || self.getStyle('visibility') === 'hidden' || self.getStyle('opacity') <= 0);\n\t\t\t},\n\t\t\tsetContent: function(source, isHtml) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tnode = self.node;\n\n\t\t\t\tif(isHtml) {\n\t\t\t\t\tnode.innerHTML = source;\n\t\t\t\t} else {\n\t\t\t\t\tnode[STRING_CONTENTATTRIBUTE] = source;\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tsetAttribute: function(attribute, value) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(isTypeOf(attribute, STRING_STRING)) {\n\t\t\t\t\tself.node.setAttribute(attribute, value);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tsetAttributes: function(attributes) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tattribute;\n\n\t\t\t\tif(isObject(attributes) && !attributes.length) {\n\t\t\t\t\tfor(attribute in attributes) {\n\t\t\t\t\t\tself.setAttribute(attribute, attributes[attribute]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tremoveAttribute: function(attribute) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(isTypeOf(attribute, STRING_STRING)) {\n\t\t\t\t\tself.node.removeAttribute(attribute);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tremoveAttributes: function() {\n\t\t\t\tvar self       = this,\n\t\t\t\t\tattributes = resolveArguments(arguments),\n\t\t\t\t\ti = 0, attribute;\n\n\t\t\t\tfor(; attribute = attributes[i]; i++) {\n\t\t\t\t\tself.removeAttribute(attribute);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tsetStyle: function(property, value) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(isTypeOf(property, STRING_STRING)) {\n\t\t\t\t\thooksCss.process('set', self.node, property, value);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tsetStyles: function(properties) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tproperty;\n\n\t\t\t\tif(isObject(properties) && !properties.length) {\n\t\t\t\t\tfor(property in properties) {\n\t\t\t\t\t\thooksCss.process('set', self.node, property, properties[property]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tremoveStyle: function(property) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(isTypeOf(property, STRING_STRING)) {\n\t\t\t\t\tself.setStyle(property, '');\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tremoveStyles: function() {\n\t\t\t\tvar self       = this,\n\t\t\t\t\tproperties = resolveArguments(arguments),\n\t\t\t\t\ti = 0, property;\n\n\t\t\t\tfor(; property = properties[i]; i++) {\n\t\t\t\t\tself.setStyle(property, '');\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\taddClass: function(name) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(name && !self.hasClass(name)) {\n\t\t\t\t\tself.node.className += (self.node.className) ? ' ' + name : name;\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tremoveClass: function(name) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(name && self.hasClass(name)) {\n\t\t\t\t\tself.node.className = self.node.className.replace(new RegExp('(?:^|\\\\s)' + name + '(?!\\\\S)'), '').trim();\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\ttoggleClass: function(name) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(name) {\n\t\t\t\t\tself.hasClass(name) ? self.removeClass(name) : self.addClass(name);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tprepend: function(element) {\n\t\t\t\tvar self    = this,\n\t\t\t\t\ttarget = self.node;\n\n\t\t\t\tif(element) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\telement = (isInstanceOf(element, DomElement)) ? element.node : resolveElement(element);\n\n\t\t\t\t\t\ttarget.firstChild ? target.insertBefore(element, target.firstChild) : self.append(element);\n\t\t\t\t\t} catch(exception) {\n\t\t\t\t\t\ttarget.insertAdjacentHTML('afterBegin', element);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tappend: function(element) {\n\t\t\t\tvar self   = this,\n\t\t\t\t\ttarget = self.node;\n\n\t\t\t\tif(element) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\ttarget.appendChild((isInstanceOf(element, DomElement)) ? element.node : resolveElement(element));\n\t\t\t\t\t} catch(exception) {\n\t\t\t\t\t\ttarget.insertAdjacentHTML('beforeEnd', element);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tprependTo: function(target) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tnode = self.node;\n\n\t\t\t\tif(target) {\n\t\t\t\t\t(target  = target.node || resolveElement(target)).firstChild ? target.insertBefore(node, target.firstChild) : self.appendTo(target);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tappendTo: function(target) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif(target) {\n\t\t\t\t\t(target.node || resolveElement(target)).appendChild(self.node);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tinsertBefore: function(target) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tnode = self.node;\n\n\t\t\t\tif(target) {\n\t\t\t\t\t(target  = target.node || resolveElement(target)).parentNode.insertBefore(node, target);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tinsertAfter: function(target) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tnode = self.node;\n\n\t\t\t\tif(target) {\n\t\t\t\t\t(target = target.node || resolveElement(target)).nextSibling ? target.parentNode.insertBefore(node, target.nextSibling) : self.appendTo(target.parentNode);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\treplace: function(target) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tnode = self.node;\n\n\t\t\t\tif(target) {\n\t\t\t\t\t(target  = target.node || resolveElement(target)).parentNode.replaceChild(node, target);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\treplaceWith: function(element) {\n\t\t\t\tvar self    = this,\n\t\t\t\t\ttarget = self.node;\n\n\t\t\t\tif(element) {\n\t\t\t\t\telement = (isInstanceOf(element, DomElement)) ? element.node : resolveElement(element);\n\n\t\t\t\t\ttarget.parentNode.replaceChild(element, target);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tdetach: function() {\n\t\t\t\tvar self = this,\n\t\t\t\t\tnode = self.node;\n\n\t\t\t\tnode.parentNode.removeChild(node);\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\ton: function(events) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\tdelegate = arguments.length > 2 ? arguments[1] : NULL,\n\t\t\t\t\tfn       = delegate ? arguments[2] : arguments[1],\n\t\t\t\t\tuuid     = fn._quid || (fn._quid = functionUniqueUuid()),\n\t\t\t\t\ti = 0, event;\n\n\t\t\t\tevents = events.split(regexMatchSpaces);\n\n\t\t\t\tfor(; event = events[i]; i++) {\n\t\t\t\t\tvar id      = event + '-' + uuid,\n\t\t\t\t\t\thandler = function(event) {\n\t\t\t\t\t\t\tvar delegateTo;\n\n\t\t\t\t\t\t\tevent = new Event(event);\n\n\t\t\t\t\t\t\tif(!event.isPropagationStopped) {\n\t\t\t\t\t\t\t\tdelegateTo  = event.delegate;\n\t\t\t\t\t\t\t\tevent._quid = functionUniqueUuid();\n\n\t\t\t\t\t\t\t\tif(!delegate || matchesDelegate(event, delegate)) {\n\t\t\t\t\t\t\t\t\tfn.call(event.currentTarget, event, event.originalEvent.detail);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif(delegateTo) {\n\t\t\t\t\t\t\t\t\tdelete event.delegate;\n\n\t\t\t\t\t\t\t\t\temitEvent.call(self, delegateTo);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\thandler.type            = event;\n\t\t\t\t\tlistener[self.uuid][id] = handler;\n\n\t\t\t\t\tself.node.addEventListener(event, handler);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\tone: function(events) {\n\t\t\t\tvar self     = this,\n\t\t\t\t\tdelegate = (arguments.length > 3 || typeof arguments[1] === 'string') ? arguments[1] : NULL,\n\t\t\t\t\tfn       = (arguments.length > 3 || typeof arguments[2] === 'function') ? arguments[2] : arguments[1],\n\t\t\t\t\teach     = ((arguments.length > 3) ? arguments[3] : arguments[2]) !== false,\n\t\t\t\t\thandler  = function(event) {\n\t\t\t\t\t\tself.off(((each === true) ? event.type : events), handler);\n\n\t\t\t\t\t\tfn.call(this, event, event.originalEvent.detail);\n\t\t\t\t\t};\n\n\t\t\t\tfn._quid = handler._quid = functionUniqueUuid();\n\n\t\t\t\tif(delegate) {\n\t\t\t\t\tself.on(events, delegate, handler);\n\t\t\t\t} else {\n\t\t\t\t\tself.on(events, handler);\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\toff: function(events, fn) {\n\t\t\t\tvar self = this,\n\t\t\t\t\tnode = self.node,\n\t\t\t\t\ti = 0, event, id, handler;\n\n\t\t\t\tevents = events.split(' ');\n\n\t\t\t\tfor(; event = events[i]; i++) {\n\t\t\t\t\tid      = fn._quid && event + '-' + fn._quid || NULL;\n\t\t\t\t\thandler = id && listener[self.uuid][id] || NULL;\n\n\t\t\t\t\tif(handler) {\n\t\t\t\t\t\tnode.removeEventListener(event, handler);\n\n\t\t\t\t\t\tdelete listener[self.uuid][id];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode.removeEventListener(event, fn);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self;\n\t\t\t},\n\t\t\temit: function(event, data) {\n\t\t\t\tvar self = this;\n\n\t\t\t\temitEvent.call(self, event, data);\n\n\t\t\t\treturn self;\n\t\t\t}\n\t\t};\n\n\t\treturn base.extend(DomElement);\n\t}\n\n\tprovide([ '/demand/validator/isObject', '/demand/validator/isInstanceOf', '/demand/validator/isTypeOf', '../base', './event', '../hooks/css', '../support/method', '../function/descriptor/generate', '../function/unique/uuid' ], definition);\n}(this, document));"],"sourceRoot":"/source/"}